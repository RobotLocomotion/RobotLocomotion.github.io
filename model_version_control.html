<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta name="msapplication-config" content="/browserconfig.xml"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <meta charset="utf-8"/>
    <link rel="apple-touch-icon" type="image/png" href="/apple-touch-icon.png"/>
    <link rel="manifest" type="application/manifest+json" href="/site.webmanifest"/>
    <link rel="mask-icon" type="image/svg+xml" href="/mask-icon.svg" color="#990000"/>
    <link rel="shortcut icon" type="image/png" href="/favicon.png"/>
    <title>Drake: Model Version Control</title>
    <meta
      name="description"
      content="Drake (&quot;dragon&quot; in Middle English) is a C++ toolbox started by the Robot
Locomotion Group at the MIT Computer Science and Artificial Intelligence
Lab (CSAIL). The development team has now grown significantly, with core
development led by the Toyota Research Institute. It is a collection of
tools for analyzing the dynamics of our robots and building control
systems for them, with a heavy emphasis on optimization-based design/
analysis.
"/>
    <!--
    The "Work Sans" font is licensed under the SIL Open Font License (OFL). For
    more information, see:
    - https://fonts.google.com/specimen/Work+Sans?preview.text_type=custom#about
    - https://scripts.sil.org/cms/scripts/page.php?site_id=nrsi&id=OFL
    -->
    <link href="https://fonts.googleapis.com/css2?family=Space+Mono:wght@400;700&family=Work+Sans:wght@300;400;600;700;800&display=swap" rel="stylesheet"/>
    <link rel="stylesheet" href="/third_party/github-styling/github-markdown.css"/>
    <link rel="stylesheet" href="/third_party/dracula/syntax.css"/>
    <link rel="stylesheet" href="/third_party/pylons/pylons.css"/>
    <link rel="stylesheet" href="/assets/css/main.css"/>
  </head>
  <body>
    <header class="site-header">
  <div class="site-header-inner contain">
    <a href="/" class="drake-logo">
      <img src="/images/drake-logo-white.svg">
    </a>
    <div class="menu-mobile-toggle">
      <span></span>
    </div>
    <nav class="site-menu">
      <ul>
        
        <li class="site-menu-item site-menu-item-main">
          <a href="/" class="site-menu-item">Home</a>

          
        </li>
        
        <li class="site-menu-item site-menu-item-main">
          <a href="/installation.html" class="site-menu-item">Installation</a>

          
        </li>
        
        <li class="site-menu-item site-menu-item-main">
          <a href="/gallery.html" class="site-menu-item">Gallery</a>

          
        </li>
        
        <li class="site-menu-item site-menu-item-main">
          API Documentation

          
            <div class="sub">
            
              <a href="/doxygen_cxx/index.html" class="site-menu-item">C++</a>
            
              <a href="/pydrake/index.html" class="site-menu-item">Python</a>
            
            </div>
          
        </li>
        
        <li class="site-menu-item site-menu-item-main">
          Resources

          
            <div class="sub">
            
              <a href="/getting_help.html" class="site-menu-item">Getting Help</a>
            
              <a href="https://deepnote.com/workspace/Drake-0b3b2c53-a7ad-441b-80f8-bf8350752305/project/Tutorials-2b4fc509-aef2-417d-a40d-6071dfed9199/%2Findex.ipynb" class="site-menu-item">Tutorials</a>
            
              <a href="/python_bindings.html" class="site-menu-item">Python Bindings</a>
            
              <a href="/developers.html" class="site-menu-item">For Developers</a>
            
              <a href="/credits.html" class="site-menu-item">Credits</a>
            
            </div>
          
        </li>
        

        <li class="search">
          <div class="search-icon">
              <!-- This is an inline SVG image of a magnifying glass. -->
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 374.9 374.84">
              <path d="M235 270a148.74 148.74 0 1 1 35-35l97.74 97.74a24.37 24.37 0 0 1 0 34.58l-.4.4a24.47 24.47 0 0 1-34.58 0L235 270Zm-86.22-7.47A113.75 113.75 0 1 0 35 148.75 113.75 113.75 0 0 0 148.75 262.5Z"/>
            </svg>
          </div>
          <div class="search-bar">
            <form id="search_form" action="https://google.com/search" method="get">
              <input type="text" name="q" placeholder="Search all of Drake…" />
              <input type="hidden" name="q" value="site:drake.mit.edu OR site:underactuated.csail.mit.edu OR site:manipulation.csail.mit.edu" />
            </form>
            <div class="search-close">
              <!-- This is an inline SVG image of an "X". -->
              <svg height="20" width="20" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 373.61 373.57">
                <path d="M219.71 186.77 366.71 40a23.43 23.43 0 1 0-33.13-33.13l-146.77 147-146.77-147A23.43 23.43 0 0 0 6.9 40l147 146.77-147 146.77a23.43 23.43 0 1 0 33.14 33.13l146.77-147 146.77 147a23.43 23.43 0 1 0 33.13-33.13Z"/>
              </svg>
            </div>
          </div>
          <ul id="results-container"></ul>
        </li>

        <li class="github-link">
          <a href="https://github.com/RobotLocomotion/drake" class="site-menu-item">GitHub <img src="/third_party/images/GitHub-Mark-Light-64px.png" /></a>
        </li>
      </ul>
    </nav>
  </div>
</header>

    <div class="page">
      <div class="content">
        <div class="drake-page">
  <header class="drake-page-header">
    <div class="contain">
      <h1>Model Version Control</h1>
    </div>
  </header>
  <section class="padding">
    <div class="contain">
      <article class="markdown-body">
        <h1 id="adding-model-artifacts-in-pull-requests">Adding Model Artifacts in Pull Requests</h1>

<p>Model artifacts have the potential to be very large, and we should avoid
committing large files directly to Git.</p>

<p>If your model’s files are small enough (&lt;100KB in a given directory), then you
may add them directly to Git in a PR to master.</p>

<p>Otherwise, you should add the large files to
<a href="https://github.com/RobotLocomotion/models">RobotLocomotion/models</a>.</p>

<p>Before you decide to submit models, please ensure that you have tests that
will need them. Do not submit a PR that adds models but has zero intent to use
them, as Drake is not a model repository.</p>

<p>See below for the suggested workflow.</p>

<h2 id="develop-changes-locally">Develop Changes Locally</h2>

<ol>
  <li>Clone <code class="language-plaintext highlighter-rouge">RobotLocomotion/models</code> locally.</li>
  <li>Create a Git branch in your local checkouts of <em>both</em> <code class="language-plaintext highlighter-rouge">models</code> and
<code class="language-plaintext highlighter-rouge">drake</code>.</li>
  <li>Update <code class="language-plaintext highlighter-rouge">drake/tools/workspace/drake_models/repository.bzl</code> to point to your
<code class="language-plaintext highlighter-rouge">models</code> checkout using
<code class="language-plaintext highlighter-rouge">github_archive(..., local_repository_override = &lt;path&gt;)</code>.</li>
  <li>Incorporate the new <code class="language-plaintext highlighter-rouge">models</code> files into a Drake <code class="language-plaintext highlighter-rouge">BUILD.bazel</code> file where
they are needed, typically by adding <code class="language-plaintext highlighter-rouge">data = ["@drake_models"]</code> to the
demo program or benchmark that uses them.
    <ol>
      <li>Do not ask the build system to “install” any files from <code class="language-plaintext highlighter-rouge">drake_models</code>;
they are already available via remote fetching. In particular, don’t add
any <code class="language-plaintext highlighter-rouge">install()</code> rule for them, nor add them to any <code class="language-plaintext highlighter-rouge">filegroup()</code> that
is already being installed.</li>
    </ol>
  </li>
  <li>Ensure your tests pass under <code class="language-plaintext highlighter-rouge">bazel test</code>.</li>
</ol>

<h2 id="submit-changes-in-a-pull-request">Submit Changes in a Pull Request</h2>

<ol>
  <li>Push your changes to your fork of <code class="language-plaintext highlighter-rouge">RobotLocomotion/models</code>. Make a PR.</li>
  <li>Update <code class="language-plaintext highlighter-rouge">drake/tools/workspace/drake_models/repository.bzl</code> to use the
commit you pushed.</li>
  <li>Submit a PR to Drake, and add a self-blocking discussion thread, such as
<code class="language-plaintext highlighter-rouge">"Working temporary SHA1 until the models PR &lt;LINK&gt; is merged."</code>,
where <code class="language-plaintext highlighter-rouge">&lt;LINK&gt;</code> references your <code class="language-plaintext highlighter-rouge">models</code> PR.</li>
  <li>Get review on your Drake PR first. Once it is generally approved, then
request review for your <code class="language-plaintext highlighter-rouge">models</code> PR.</li>
  <li>Once both PRs are approved:
    <ol>
      <li>Merge your <code class="language-plaintext highlighter-rouge">models</code> PR.</li>
      <li>Update <code class="language-plaintext highlighter-rouge">drake/tools/workspace/drake_models/repository.bzl</code> to the latest
merge commit on <code class="language-plaintext highlighter-rouge">master</code> for <code class="language-plaintext highlighter-rouge">RobotLocomotion/models</code>.</li>
      <li>Merge your <code class="language-plaintext highlighter-rouge">drake</code> PR.</li>
    </ol>
  </li>
</ol>

      </article>
    </div>
  </section>
</div>

        <footer class="site-footer padding">
  <div class="contain">
    <a href="/" class="drake-logo">
      <img src="/images/drake-logo.svg">
    </a>
    <div class="footer-menu">
      <ul>
        
        <li>
          <a href="/doxygen_cxx/index.html" class="site-menu-item">C++</a>
        </li>
        
        <li>
          <a href="/pydrake/index.html" class="site-menu-item">Python</a>
        </li>
        

        <li class="github-link">
          <a href="https://github.com/RobotLocomotion/drake" class="site-menu-item">GitHub <img src="/third_party/images/GitHub-Mark-64px.png" /></a>
        </li>
      </ul>
    </div>
  </div>

  <!-- TODO(eric.cousineau): Consider placing copyright here. -->

</footer>

      </div>
    </div>
    <script src="/assets/js/mobile.js"></script>
    <!-- Search -->
    <script src="/assets/js/search.js"></script>
  </body>
</html>
