<!-- HTML header for doxygen 1.15.0-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.15.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Drake: Contact Modeling in Drake</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(function() { init_search(); });
</script>
<script type="text/javascript">
window.MathJax = {
  options: {
    ignoreHtmlClass: 'tex2jax_ignore',
    processHtmlClass: 'tex2jax_process'
  }
};
</script>
<script type="text/javascript" id="MathJax-script" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@4/tex-chtml.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen_extra.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<header class="site-header">
 <div class="site-header-inner contain">
  <a class="drake-logo" href="/"><img src="/images/drake-logo-white.svg"></a>
  <div class="menu-mobile-toggle">
   <span></span>
  </div>
  <nav class="site-menu">
   <ul>
    <li class="site-menu-item site-menu-item-main">
     <a class="site-menu-item" href="/">Home</a>
    </li>
    <li class="site-menu-item site-menu-item-main">
     <a class="site-menu-item" href="/installation.html">Installation</a>
    </li>
    <li class="site-menu-item site-menu-item-main">
     <a class="site-menu-item" href="/gallery.html">Gallery</a>
    </li>
    <li class="site-menu-item site-menu-item-main">API Documentation
     <div class="sub">
      <a class="site-menu-item" href="/doxygen_cxx/index.html">C++</a>
      <a class="site-menu-item" href="/pydrake/index.html">Python</a>
     </div>
    </li>
    <li class="site-menu-item site-menu-item-main">Resources
     <div class="sub">
      <a class="site-menu-item" href="/getting_help.html">Getting Help</a>
      <a class="site-menu-item" href="https://deepnote.com/workspace/Drake-0b3b2c53-a7ad-441b-80f8-bf8350752305/project/Tutorials-2b4fc509-aef2-417d-a40d-6071dfed9199/notebook/index-753e3c9d261247ba9f0eb1d7868c18c8">Tutorials</a>
      <a class="site-menu-item" href="/python_bindings.html">Python Bindings</a>
      <a class="site-menu-item" href="/developers.html">For Developers</a>
      <a class="site-menu-item" href="/credits.html">Credits</a>
     </div>
    </li>
    <li class="github-link">
     <a class="site-menu-item" href="https://github.com/RobotLocomotion/drake">GitHub <img src="/third_party/images/GitHub-Mark-Light-64px.png"></a>
    </li>
   </ul>
  </nav>
 </div>
</header>
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Drake
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<div class="title-banner">
 <div class="title-banner__title">
  Drake C++ Documentation
 </div>
 <div id="DDGSearch">
  <form id="search_form_cpp" class="wy_form" action="https://google.com/search" method="get">
   <input type="text" name="q" placeholder="Search C++ API only…">
   <input type="hidden" name="q" value="site:drake.mit.edu/doxygen_cxx">
  </form>
  <form id="search_form" class="wy_form" action="https://google.com/search" method="get">
   <input type="text" name="q" placeholder="Search all of Drake…">
   <input type="hidden" name="q" value="site:drake.mit.edu OR site:underactuated.csail.mit.edu OR site:manipulation.csail.mit.edu">
  </form>
 </div>
 <div id="MSearchBoxContainer">
  <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect" class="search-icon" onmouseover="return searchBox.OnSearchSelectShow()" onmouseout="return searchBox.OnSearchSelectHide()"><span class="search-icon-dropdown"></span></span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><div id="MSearchCloseImg" class="close-icon"></div></a>
          </span>
        </div>
</td>
 </div>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.15.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('group__drake__contacts.html','',''); });
</script>
<div id="container">
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">Contact Modeling in Drake <div class="ingroups"><a class="el" href="group__multibody.html">Multibody Kinematics and Dynamics</a></div></div></div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 id="header-details" class="groupheader">Detailed Description</h2>
<h1 class="doxsection"><a class="anchor" id="solid_mechanics"></a>
Mechanics of Solids</h1>
<p>All objects in real life are compliant and deform under the action of external loads. Deformations, as well as motion, of real life solids are well described by the theory of <em>continuum mechanics</em>, which provides a complete description of the full three-dimensional state of stress and deformation given a set of external loads and boundary conditions. Broadly, how compliant a solid is depends on the material (or materials) it is made of. Factors such as microstructure, imperfections, anisotropy, etc. affect the behavior of a material. Ultimately, in continuum mechanics, the behavior of a particular material can be boiled down to its stress-strain curve, or constitutive law describing the stress/strain relationship at each point within a solid composed of that material. The simplest constitutive law is that of Hooke's law, describing the behaviour of materials which exhibit a linear-elastic region in the stress-strain curve. Materials such as steel and aluminum can be modeled as Hookean, as long as strain is within the elastic range (&lt; 1% strain for steel for example). Other materials such as rubber are hyperelastic and are best described by a Neo-Hookean law. The <em>stiffness</em> of a material essentially refers to how steep this stress-strain curve is. The steeper the slope of the stress-strain curve, the stiffer a material is. For Hookean materials, this translates to a larger Young's modulus (the slope of the stress-strain curve in the linear regime).</p>
<h1 class="doxsection"><a class="anchor" id="contact_mechanics"></a>
Contact Mechanics</h1>
<p>Contact mechanics refers to the study of the deformations that solids undergo as the result of contact loads. The study of contact mechanics dates back to the pioneering work of Heinrich Hertz in 1882. The Hertzian theory of contact describes the loads and deformations when strains are small, the contacting surfaces are much smaller than the overall dimensions of the contacting bodies and the materials are linear (i.e. are described by the Hookean law).</p>
<p>In general, when two solids come into contact, they inevitably must undergo deformation in order to avoid the physical impossibility of interpenetration. This constraint is described by the Signorini boundary condition, which at each point in the contact surface imposes a complementarity constraint between normal stress and penetration (described by a gap function). Stresses on the contact surface are the result of these deformations.</p>
<p>Ultimately, contact forces are the result of integrating these contact stresses on the contact surface between the solids.</p>
<h1 class="doxsection"><a class="anchor" id="rigid_approximation"></a>
Rigid Approximation of Contact</h1>
<p>A rigid body is an <em>approximation</em> to the general mechanics of solids in the mathematical limit to infinite stiffness. This mathematical approximation has been used extensively in the past for the simulation of multibody systems with contact. As an approximation to the real physical system, it leads to known problems such as indeterminate systems. Consider for instance a rigid beam supported by its two end points and by a third point of support right in the middle, through its center of gravity. Under the action of its own weight, infinite solutions to the static problem exist.</p>
<p>Rigid contact with Coulomb friction is a common approximation used in simulation as well. It has its own limitations, most notable the possible non-existence of a solution. An example of this is the well known Painlevé paradox <a class="el" href="#PfeifferGlocker1996">[Pfeiffer &amp; Glocker, 1996]</a>, a one degree of freedom system with only one contact that, depending on the state, has an infinite number of solutions or even no solution.</p>
<p>It should be noted that these artifacts are a consequence of the mathematical approximations adopted and not a flaw of the original continuum mechanics theory and even much less, a flaw in the physics itself.</p>
<h1 class="doxsection"><a class="anchor" id="why_rigid"></a>
Why so Rigid? Embracing Compliance</h1>
<p>The rigid modeling of contact coupled with Coulomb friction is plagued with a wide variety of technical issues:</p><ul>
<li>Even without friction, the system can be overconstrained and the contact forces are indeterminate.</li>
<li>As described above, rigid contact coupled with Coulomb friction might lead to the Painlevé paradox, where the system has no solution or infinite solutions.</li>
<li>Simulating these systems requires the formulation of Non-Linear Complementarity problems (NCPs). NCPs are believed to be NP-hard <a class="el" href="#Kaufman2008">[Kaufman et al., 2008]</a> (i.e. very difficult to deal with in practice) and are often very ill conditioned numerically, leading to brittle solutions in practical software.</li>
</ul>
<p>The literature on this topic is very rich, and there has been a great deal of effort to solve many of these problems. Unfortunately, most solutions involve the introduction of heuristics or tuning parameters hidden within the solvers that introduce yet new artifacts or trading off robustness/speed for physical accuracy.</p>
<p>As an example, <em>constraint softening</em> is introduced "...to control the
sponginess and springiness..." (quoting from the <a class="el" href="#ODEUserGuide">[ODE User Guide]</a>). This strategy is used to improve the numerics of the solver, which no longer approximates a true rigid system, but a compliant one. Similarly, Interior Point (IP) methods for general NCPs or more recently Incremental Potential Contact (IPC) in <a class="el" href="#Li2020">[Li et al., 2020]</a>, introduce barrier functions to handle constraints. These barriers can only be solved to a finite accuracy, at which the solution is essentially compliant (even if stiff). This is discussed in more detail in <a class="el" href="#Castro2023">[Castro et al., 2023]</a>.</p>
<h2 class="doxsection"><a class="anchor" id="compliance_in_robotics"></a>
Compliance in Robotics</h2>
<p>Many robots are actually compliant in the real hardware &mdash; robotic grippers and fingers are padded to improve grasping efficiency, and robot feet as those commonly found in quadrupeds and humanoid robots have rubber surfaces. Therefore, compliance <em>must</em> be modeled if our goal is physical accuracy to close the sim2real gap.</p>
<h2 class="doxsection"><a class="anchor" id="embracing_compliance"></a>
Embracing Compliance</h2>
<p>The discussion above can be probably summarized as follows:</p><ol type="1">
<li>The rigid approximation of contact leads to fundamental problems in the mathematics and ill-conditioned numerics in software.</li>
<li>Real physical systems are compliant, even if stiff.</li>
<li>Numerical techniques to deal with ill conditioning essentially boil down to introducing compliance at some level deep within the solver.</li>
</ol>
<p>It is for these reasons that in Drake we embrace compliance, to provide accurate modeling of the physics of contact but also as a means to mitigate numerical problems associated with rigid approximations of contact. Within this framework, <em>rigid contact</em> can be approximated with very stiff compliance. As shown in <a class="el" href="#Castro2023">[Castro et al., 2023]</a> this technique is very effective even at very high stiffness values, beyond what it is really needed to model hard materials such as steel. In this way the modeling of contact is transparent to users, with physical parameters to control compliance and no need for hidden parameters in our solvers.</p>
<p>Read more about Drake's modeling of compliant contact in the next section, <a class="el" href="group__compliant__contact.html">Modeling Compliant Contact</a>.</p>
<p><b>Next topic:</b> <a class="el" href="group__compliant__contact.html">Modeling Compliant Contact</a></p>
<h1 class="doxsection"><a class="anchor" id="contact_model_references"></a>
References</h1>
<ul>
<li><a class="anchor" id="Anitescu2006"></a>[Anitescu, 2006] Anitescu, M., 2006. Optimization-based simulation of nonsmooth rigid multibody dynamics. Mathematical Programming, 105, pp.113-143.</li>
<li><a class="anchor" id="Castro2019"></a>[Castro et al., 2019] Castro, A.M., Qu, A., Kuppuswamy, N., Alspach, A. and Sherman, M., 2020. A transition-aware method for the simulation of compliant contact with regularized friction. IEEE Robotics and Automation Letters, 5(2), pp.1859-1866.</li>
<li><a class="anchor" id="Castro2022"></a>[Castro et al., 2022] Castro, A.M., Permenter, F.N. and Han, X., 2022. An unconstrained convex formulation of compliant contact. IEEE Transactions on Robotics, 39(2), pp.1301-1320.</li>
<li><a class="anchor" id="Castro2023"></a>[Castro et al., 2023] Castro, A., Han, X. and Masterjohn, J., 2023. A Theory of Irrotational Contact Fields. arXiv preprint <a href="https://arxiv.org/abs/2312.03908">https://arxiv.org/abs/2312.03908</a></li>
<li><a class="anchor" id="Catto2013"></a>[Catto, 2013] Catto, E., 2013. Continuous Collision. Game Developers Conference. <a href="https://box2d.org/files/ErinCatto_ContinuousCollision_GDC2013.pdf">https://box2d.org/files/ErinCatto_ContinuousCollision_GDC2013.pdf</a></li>
<li><a class="anchor" id="BulletSdkManual"></a>[Coumans, 2015] Coumans, E., 2015. Bullet 2.83 Physics SDK Manual. <a href="https://github.com/bulletphysics/bullet3/blob/master/docs/Bullet_User_Manual.pdf">https://github.com/bulletphysics/bullet3/blob/master/docs/Bullet_User_Manual.pdf</a></li>
<li><a class="anchor" id="Gonthier2007"></a>[Gonthier, 2007] Gonthier, Y., 2007. Contact dynamics modelling for robotic task simulation.</li>
<li><a class="anchor" id="Johnson1987"></a>[Johnson, 1987] Johnson, K.L., 1987. Contact mechanics. Cambridge university press.</li>
<li><a class="anchor" id="HuntCrossley1975"></a>[Hunt and Crossley 1975] Hunt, K.H. and Crossley, F.R.E., 1975. Coefficient of restitution interpreted as damping in vibroimpact. Journal of Applied Mechanics, vol. 42, pp. 440–445.</li>
<li><a class="anchor" id="Kaufman2008"></a>[Kaufman et al., 2008] Kaufman, D.M., Sueda, S., James, D.L. and Pai, D.K., 2008. Staggered projections for frictional contact in multibody systems. In ACM SIGGRAPH Asia 2008 papers (pp. 1-11).</li>
<li><a class="anchor" id="Li2020"></a>[Li et al., 2020] Li, M., Ferguson, Z., Schneider, T., Langlois, T.R., Zorin, D., Panozzo, D., Jiang, C. and Kaufman, D.M., 2020. Incremental potential contact: intersection-and inversion-free, large-deformation dynamics. ACM Trans. Graph., 39(4), p.49.</li>
<li><a class="anchor" id="ODEUserGuide"></a>[ODE User Guide] Smith, R., 2005. Open dynamics engine. <a href="https://ode.org/ode-latest-userguide.pdf">https://ode.org/ode-latest-userguide.pdf</a></li>
<li><a class="anchor" id="PfeifferGlocker1996"></a>[Pfeiffer &amp; Glocker, 1996] Pfeiffer, F., Glocker, C. (1996). Multibody Dynamics with Unilateral Contacts. Germany: Wiley.</li>
<li><a class="anchor" id="Todorov2014"></a>[Todorov, 2014] Todorov, E., 2014, May. Convex and analytically-invertible dynamics with contacts and constraints: Theory and implementation in mujoco. In 2014 IEEE International Conference on Robotics and Automation (ICRA) (pp. 6054-6061). IEEE. </li>
</ul>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-groups" class="groupheader"><a id="groups" name="groups"></a>
Topics</h2></td></tr>
<tr class="memitem:compliant_5Fcontact" id="r_compliant_5Fcontact"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__compliant__contact.html">Modeling Compliant Contact </a></td></tr>
<tr class="memdesc:group__compliant__contact"><td class="mdescLeft">&#160;</td><td class="mdescRight"><br /></td></tr>
<tr class="memitem:friction_5Fmodel" id="r_friction_5Fmodel"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__friction__model.html">Modeling of Dry Friction </a></td></tr>
<tr class="memdesc:group__friction__model"><td class="mdescLeft">&#160;</td><td class="mdescRight"><br /></td></tr>
<tr class="memitem:hydro_5Fmargin" id="r_hydro_5Fmargin"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__hydro__margin.html">Margin for Hydroelastic Contact </a></td></tr>
<tr class="memdesc:group__hydro__margin"><td class="mdescLeft">&#160;</td><td class="mdescRight"><br /></td></tr>
<tr class="memitem:hydro_5Fparams" id="r_hydro_5Fparams"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__hydro__params.html">Estimation of Hydroelastic Parameters </a></td></tr>
<tr class="memdesc:group__hydro__params"><td class="mdescLeft">&#160;</td><td class="mdescRight"><br /></td></tr>
<tr class="memitem:contact_5Fdefaults" id="r_contact_5Fdefaults"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__contact__defaults.html">Default Contact Parameters </a></td></tr>
<tr class="memdesc:group__contact__defaults"><td class="mdescLeft">&#160;</td><td class="mdescRight"><br /></td></tr>
</table>
</div><!-- contents -->
</div><!-- doc-content -->
<div id="page-nav" class="page-nav-panel">
<div id="page-nav-resize-handle"></div>
<div id="page-nav-tree">
<div id="page-nav-contents">
</div><!-- page-nav-contents -->
</div><!-- page-nav-tree -->
</div><!-- page-nav -->
</div><!-- container -->
<!-- footer -->
<div class="navpath">
  <ul>
  </ul>
</div>
<footer id="nav-path", class="site-footer padding">
  <div class="contain">
    <a href="/" class="drake-logo">
      <img src="/images/drake-logo.svg"/>
    </a>
    <div class="footer-menu">
      <ul>    
        <li>
          <a href="/doxygen_cxx/index.html" class="site-menu-item">C++</a>
        </li>    
        <li>
          <a href="/pydrake/index.html" class="site-menu-item">Python</a>
        </li>
        <li class="github-link">
          <a href="https://github.com/RobotLocomotion/drake" class="site-menu-item">GitHub <img src="/third_party/images/GitHub-Mark-64px.png"/></a>
        </li>
      </ul>
    </div>
  </div>
</footer>
<script type="text/javascript">
searchBox.searchLabel = 'Go to name…';
searchBox.DOMSearchField().placeholder = searchBox.searchLabel;
searchBox.DOMSearchField().value = '';
</script>
</body>
</html>
