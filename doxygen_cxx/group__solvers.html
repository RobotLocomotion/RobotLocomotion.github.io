<!-- HTML header for doxygen 1.15.0-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.15.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Drake: Formulating and Solving Optimization Problems</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(function() { init_search(); });
</script>
<script type="text/javascript">
window.MathJax = {
  options: {
    ignoreHtmlClass: 'tex2jax_ignore',
    processHtmlClass: 'tex2jax_process'
  }
};
</script>
<script type="text/javascript" id="MathJax-script" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@4/tex-chtml.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen_extra.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<header class="site-header">
 <div class="site-header-inner contain">
  <a class="drake-logo" href="/"><img src="/images/drake-logo-white.svg"></a>
  <div class="menu-mobile-toggle">
   <span></span>
  </div>
  <nav class="site-menu">
   <ul>
    <li class="site-menu-item site-menu-item-main">
     <a class="site-menu-item" href="/">Home</a>
    </li>
    <li class="site-menu-item site-menu-item-main">
     <a class="site-menu-item" href="/installation.html">Installation</a>
    </li>
    <li class="site-menu-item site-menu-item-main">
     <a class="site-menu-item" href="/gallery.html">Gallery</a>
    </li>
    <li class="site-menu-item site-menu-item-main">API Documentation
     <div class="sub">
      <a class="site-menu-item" href="/doxygen_cxx/index.html">C++</a>
      <a class="site-menu-item" href="/pydrake/index.html">Python</a>
     </div>
    </li>
    <li class="site-menu-item site-menu-item-main">Resources
     <div class="sub">
      <a class="site-menu-item" href="/getting_help.html">Getting Help</a>
      <a class="site-menu-item" href="https://deepnote.com/workspace/Drake-0b3b2c53-a7ad-441b-80f8-bf8350752305/project/Tutorials-2b4fc509-aef2-417d-a40d-6071dfed9199/notebook/index-753e3c9d261247ba9f0eb1d7868c18c8">Tutorials</a>
      <a class="site-menu-item" href="/python_bindings.html">Python Bindings</a>
      <a class="site-menu-item" href="/developers.html">For Developers</a>
      <a class="site-menu-item" href="/credits.html">Credits</a>
     </div>
    </li>
    <li class="github-link">
     <a class="site-menu-item" href="https://github.com/RobotLocomotion/drake">GitHub <img src="/third_party/images/GitHub-Mark-Light-64px.png"></a>
    </li>
   </ul>
  </nav>
 </div>
</header>
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Drake
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<div class="title-banner">
 <div class="title-banner__title">
  Drake C++ Documentation
 </div>
 <div id="DDGSearch">
  <form id="search_form_cpp" class="wy_form" action="https://google.com/search" method="get">
   <input type="text" name="q" placeholder="Search C++ API only…">
   <input type="hidden" name="q" value="site:drake.mit.edu/doxygen_cxx">
  </form>
  <form id="search_form" class="wy_form" action="https://google.com/search" method="get">
   <input type="text" name="q" placeholder="Search all of Drake…">
   <input type="hidden" name="q" value="site:drake.mit.edu OR site:underactuated.csail.mit.edu OR site:manipulation.csail.mit.edu">
  </form>
 </div>
 <div id="MSearchBoxContainer">
  <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect" class="search-icon" onmouseover="return searchBox.OnSearchSelectShow()" onmouseout="return searchBox.OnSearchSelectHide()"><span class="search-icon-dropdown"></span></span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><div id="MSearchCloseImg" class="close-icon"></div></a>
          </span>
        </div>
</td>
 </div>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.15.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('group__solvers.html','',''); });
</script>
<div id="container">
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">Formulating and Solving Optimization Problems </div></div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 id="header-details" class="groupheader">Detailed Description</h2>
<p>Drake's MathematicalProgram class is used to solve the mathematical optimization problem in the following form </p>
<pre>
  minₓ f(x)
  s.t x ∈ S.
</pre><p> Depending on the formulation of the objective function f, and the structure of the constraint set S, this optimization problem can be grouped into different categories (linear programming, quadratic programming, nonconvex nonlinear programming, etc). Drake will call suitable solvers for each category of optimization problem.</p>
<p>Drake wraps a number of open source and commercial solvers (+ a few custom solvers) to provide a common interface for convex optimization, mixed-integer convex optimization, and other non-convex mathematical programs.</p>
<p>The MathematicalProgram class handles the coordination of decision variables, objectives, and constraints. The <a class="el" href="namespacedrake_1_1solvers.html#ae34d0e7febfca6328561574df6ce91d5">Solve()</a> method reflects on the accumulated objectives and constraints and will dispatch to the most appropriate solver. Alternatively, one can invoke specific solver by instantiating its <a class="el" href="classdrake_1_1solvers_1_1_solver_interface.html">SolverInterface</a> and passing the MathematicalProgram directly to the <a class="el" href="classdrake_1_1solvers_1_1_solver_interface.html#aec933bef2f8c7a702a6fd5c59feac5ec">SolverInterface::Solve()</a> method.</p>
<p>Our solver coverage still has many gaps, but is under active development.</p>
<h2>Closed-form solutions</h2>
<p>When the mathematical problem is formulated as the following linear system </p><pre>
find x
s.t Ax = b,
</pre><p> then <a class="el" href="classdrake_1_1solvers_1_1_linear_system_solver.html">LinearSystemSolver</a> provides efficient closed form solution.</p>
<p>When the mathematical problem is formulated as the following (convex) quadratic program with only linear equality constraint </p><pre>
min 0.5 xᵀHx + aᵀx + b
s.t Ax = b,
</pre><p> then <a class="el" href="classdrake_1_1solvers_1_1_equality_constrained_q_p_solver.html">EqualityConstraintQPSolver</a> provides efficient closed form solution.</p>
<h2>Convex Optimization</h2>
<table class="doxtable">
<tr>
<td>Solver</td><td><a href="https://en.wikipedia.org/wiki/Linear_programming">LP</a></td><td><a href="https://en.wikipedia.org/wiki/Quadratic_programming">QP</a></td><td><a href="https://en.wikipedia.org/wiki/Second-order_cone_programming">SOCP</a></td><td><a href="https://en.wikipedia.org/wiki/Semidefinite_programming">SDP</a></td><td><a href="https://en.wikipedia.org/wiki/Sum-of-squares_optimization">SOS</a></td></tr>
<tr>
<td><a href="https://www.gurobi.com/products/gurobi-optimizer">Gurobi</a> †</td><td align="center">♦</td><td align="center">♦</td><td align="center">♦</td><td></td><td></td></tr>
<tr>
<td><a href="https://www.mosek.com/products/mosek">MOSEK<a href="/tm.html">™</a></a> †</td><td align="center">♦</td><td align="center">♦</td><td align="center">♦</td><td align="center">♦</td><td align="center">♦</td></tr>
<tr>
<td><a href="https://github.com/coin-or/Clp">CLP</a></td><td align="center">♦</td><td></td><td></td><td></td><td></td></tr>
<tr>
<td><a href="https://github.com/coin-or/Csdp">CSDP</a></td><td align="center">⟡</td><td></td><td align="center">⟡</td><td align="center">⟡</td><td align="center">⟡</td></tr>
<tr>
<td><a href="https://github.com/oxfordcontrol/Clarabel.rs">Clarabel</a></td><td align="center">♦</td><td align="center">♦</td><td align="center">♦</td><td align="center">♦</td><td align="center">♦</td></tr>
<tr>
<td><a href="https://github.com/cvxgrp/scs">SCS</a></td><td align="center">△</td><td align="center">△</td><td align="center">△</td><td align="center">△</td><td align="center">△</td></tr>
<tr>
<td><a href="https://github.com/oxfordcontrol/osqp">OSQP</a></td><td></td><td align="center">△</td><td></td><td></td><td></td></tr>
<tr>
<td><a href="https://ccom.ucsd.edu/~optimizers/solvers/snopt/">SNOPT</a> † ‡</td><td align="center">▢</td><td align="center">▢</td><td align="center">⬘</td><td align="center">⬘</td><td align="center">⬘</td></tr>
<tr>
<td><a href="https://projects.coin-or.org/Ipopt">Ipopt</a></td><td align="center">▢</td><td align="center">▢</td><td align="center">⬘</td><td align="center">⬘</td><td align="center">⬘</td></tr>
<tr>
<td><a href="http://ab-initio.mit.edu/wiki/index.php/NLopt">NLopt</a></td><td align="center">▢</td><td align="center">▢</td><td align="center">⬘</td><td align="center">⬘</td><td align="center">⬘</td></tr>
</table>
<p>† This is a commercial solver which requires a license (note that some have free licenses for academics). See <a href="https://drake.mit.edu/bazel.html#proprietary-solvers">the build system documentation</a> for details.</p>
<p>‡ <a href="https://drake.mit.edu/installation.html">Drake's pre-compiled binary releases</a> incorporate a private build of SNOPT that does not require a license when invoked via Drake's SnoptSolver wrapper class.</p>
<p>♦ A preferred solver for the given category.</p>
<p>⟡ The native CSDP solver cannot handle free variables (namely all variables have to be constrained within a cone). In Drake we apply special techniques to handle free variables (refer to RemoveFreeVariableMethod for more details). These heuristics can make the problem expensive to solve or poorly conditioned.</p>
<p>△ These solvers are not accurate. They implement ADMM algorithm, which converges quickly to a low-accuracy solution, and requires many iterations to achieve high accuracy.</p>
<p>▢ These solvers can solve the convex problems, but are not good at it. They treat the convex problems as general nonlinear optimization problems.</p>
<p>⬘ These gradient-based solvers expect smooth gradients. These problems don't have smooth gradients everywhere, hence even though the problem is convex, these gradient-bases solvers might not converge to the globally optimal solution.</p>
<h2>Mixed-Integer Convex Optimization</h2>
<table class="doxtable">
<tr>
<td>Solver</td><td>MILP</td><td>MIQP</td><td>MISOCP</td><td>MISDP</td></tr>
<tr>
<td><a href="https://www.gurobi.com/products/gurobi-optimizer">Gurobi</a> †</td><td align="center">♦</td><td align="center">♦</td><td align="center">♦</td><td></td></tr>
<tr>
<td><a href="https://www.mosek.com/products/mosek">MOSEK<a href="/tm.html">™</a></a> †</td><td align="center">♦</td><td align="center">♦</td><td align="center">♦</td><td></td></tr>
<tr>
<td><a class="el" href="classdrake_1_1solvers_1_1_mixed_integer_branch_and_bound.html">naive branch-and-bound</a> </td><td align="center">◊</td><td align="center">◊</td><td align="center">◊</td><td align="center">◊</td></tr>
</table>
<p>† This is a commercial solver which requires a license (note that some have free licenses for academics). See <a href="https://drake.mit.edu/bazel.html#proprietary-solvers">the build system documentation</a> for details.</p>
<p>♦ A preferred solver for the given category.</p>
<p>◊ The naive solver's usefulness is likely restricted to small-sized problems with dozens of binary variables. We implement only the basic branch-and-bound algorithm, without cutting planes nor advanced branching heuristics.</p>
<h2>Nonconvex Programming</h2>
<table class="doxtable">
<tr>
<td>Solver</td><td><a href="https://en.wikipedia.org/wiki/Nonlinear_programming">Nonlinear Program</a></td><td><a href="https://en.wikipedia.org/wiki/Linear_complementarity_problem">LCP</a></td><td><a href="https://en.wikipedia.org/wiki/Satisfiability_modulo_theories">SMT</a></td></tr>
<tr>
<td><a href="https://ccom.ucsd.edu/~optimizers/solvers/snopt/">SNOPT</a> † ‡</td><td align="center">♦</td><td>⟐</td><td></td></tr>
<tr>
<td><a href="https://projects.coin-or.org/Ipopt">Ipopt</a></td><td align="center">♦</td><td>⟐</td><td></td></tr>
<tr>
<td><a href="http://ab-initio.mit.edu/wiki/index.php/NLopt">NLopt</a></td><td align="center">♦</td><td>⟐</td><td></td></tr>
<tr>
<td><a href="https://github.com/PositronicsLab/Moby">Moby LCP</a></td><td></td><td align="center">♦</td><td></td></tr>
</table>
<p>† This is a commercial solver which requires a license (note that some have free licenses for academics). See <a href="https://drake.mit.edu/bazel.html#proprietary-solvers">the build system documentation</a> for details.</p>
<p>‡ <a href="https://drake.mit.edu/installation.html">Drake's pre-compiled binary releases</a> incorporate a private build of SNOPT that does not require a license when invoked via Drake's SnoptSolver wrapper class.</p>
<p>♦ A preferred solver for the given category.</p>
<p>⟐ SNOPT/IPOPT/NLOPT might be able to solve LCP, but they are not the preferred solver. </p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-groups" class="groupheader"><a id="groups" name="groups"></a>
Topics</h2></td></tr>
<tr class="memitem:solver_5Fevaluators" id="r_solver_5Fevaluators"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__solver__evaluators.html">Costs and Constraints </a></td></tr>
<tr class="memdesc:group__solver__evaluators"><td class="mdescLeft">&#160;</td><td class="mdescRight">Most simple costs and constraints can be added directly to a <a class="el" href="classdrake_1_1solvers_1_1_mathematical_program.html" title="MathematicalProgram stores the decision variables, the constraints and costs of an optimization probl...">MathematicalProgram</a> through the <a class="el" href="classdrake_1_1solvers_1_1_mathematical_program.html#a4efea1b480be940fe05070939b7954ac" title="Adds a generic cost to the optimization program.">MathematicalProgram::AddCost()</a> and <a class="el" href="classdrake_1_1solvers_1_1_mathematical_program.html#af05fa6863859ca8be0153e10c29def11" title="Adds a generic constraint to the program.">MathematicalProgram::AddConstraint()</a> interfaces and their specializations. <br /></td></tr>
<tr class="memitem:geometry_5Foptimization" id="r_geometry_5Foptimization"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__geometry__optimization.html">Geometry Optimization </a></td></tr>
<tr class="memdesc:group__geometry__optimization"><td class="mdescLeft">&#160;</td><td class="mdescRight">Provides an abstraction for reasoning about geometry in optimization problems, and using optimization problems to solve geometry problems. <br /></td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-nested-classes" class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:MathematicalProgram" id="r_MathematicalProgram"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdrake_1_1solvers_1_1_mathematical_program.html">MathematicalProgram</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="classdrake_1_1solvers_1_1_mathematical_program.html" title="MathematicalProgram stores the decision variables, the constraints and costs of an optimization probl...">MathematicalProgram</a> stores the decision variables, the constraints and costs of an optimization problem.  <a href="classdrake_1_1solvers_1_1_mathematical_program.html#details">More...</a><br /></td></tr>
</table>
</div><!-- contents -->
</div><!-- doc-content -->
<div id="page-nav" class="page-nav-panel">
<div id="page-nav-resize-handle"></div>
<div id="page-nav-tree">
<div id="page-nav-contents">
</div><!-- page-nav-contents -->
</div><!-- page-nav-tree -->
</div><!-- page-nav -->
</div><!-- container -->
<!-- footer -->
<div class="navpath">
  <ul>
  </ul>
</div>
<footer id="nav-path", class="site-footer padding">
  <div class="contain">
    <a href="/" class="drake-logo">
      <img src="/images/drake-logo.svg"/>
    </a>
    <div class="footer-menu">
      <ul>    
        <li>
          <a href="/doxygen_cxx/index.html" class="site-menu-item">C++</a>
        </li>    
        <li>
          <a href="/pydrake/index.html" class="site-menu-item">Python</a>
        </li>
        <li class="github-link">
          <a href="https://github.com/RobotLocomotion/drake" class="site-menu-item">GitHub <img src="/third_party/images/GitHub-Mark-64px.png"/></a>
        </li>
      </ul>
    </div>
  </div>
</footer>
<script type="text/javascript">
searchBox.searchLabel = 'Go to name…';
searchBox.DOMSearchField().placeholder = searchBox.searchLabel;
searchBox.DOMSearchField().value = '';
</script>
</body>
</html>
