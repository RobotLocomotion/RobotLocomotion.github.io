<!-- HTML header for doxygen 1.8.15-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Drake: Render Engine Benchmarks</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen_extra.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Drake
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
   <td>
    <div id="DDGSearch">
     <form id="ddg-search-form" class="wy_form" action="https://duckduckgo.com/" method="get">
      <input type="text" name="q" placeholder="Search C++ API only…" />
      <input type="hidden" name="sites" value="drake.mit.edu/doxygen_cxx" />
     </form>
     <form id="ddg-search-form" class="wy_form" action="https://duckduckgo.com/" method="get">
      <input type="text" name="q" placeholder="Search all of Drake…" />
      <input type="hidden" name="sites" value="drake.mit.edu" />
     </form>
    </div">
   </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.15 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('group__render__engine__benchmarks.html','');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Render Engine Benchmarks<div class="ingroups"><a class="el" href="group__geometry.html">Geometric Representations</a> &raquo; <a class="el" href="group__render__engines.html">Rendering Engines</a> &raquo; <a class="el" href="group__render__benchmarks.html">Render Benchmarks</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<p>The benchmark consists of a scene with one or more spheres and one or more cameras above the spheres, looking down at the spheres. </p>
<p>If there are multiple spheres, they are positioned in a regular grid placed at a uniform height above the ground plane. Increasing the number of spheres provides an approximate measure of how the renderer performs with increased scene complexity.</p>
<p>If there are multiple cameras, they are all at the same position, looking in the same direction, with the same intrinsic properties. In other words, each should produce the same output image. This provides a measure of the scalability as a simulation includes an increasing number of cameras.</p>
<p>The output image can be configured to an arbitrary size; larger images take more rendering time.</p>
<h2>Warm-starting <a class="el" href="classdrake_1_1geometry_1_1render_1_1_render_engine.html" title="The engine for performing rasterization operations on geometry.">RenderEngine</a> Implementations</h2>
<p>Some <a class="el" href="classdrake_1_1geometry_1_1render_1_1_render_engine.html" title="The engine for performing rasterization operations on geometry.">RenderEngine</a> implementations may defer some of the initialization work until the rendering API is actually invoked (e.g., <a class="el" href="classdrake_1_1geometry_1_1render_1_1_render_engine_vtk.html" title="See documentation of MakeRenderEngineVtk().">RenderEngineVtk</a>). In these cases, the first rendering will be misleadingly expensive. The benchmark "warm starts" each render engine under evaluation by performing two renderings outside of the timed loop. This allows the benchmark to better report the expected results in the engine's "steady state".</p>
<p>When comparing these benchmark results with observed performance in applications, remember that the first and possibly second renderings may deceptively impact any analysis of <em>average</em> render performance.</p>
<h2>Benchmarks</h2>
<p>The benchmarks have been configured to examine the following characteristics of the included <a class="el" href="classdrake_1_1geometry_1_1render_1_1_render_engine.html" title="The engine for performing rasterization operations on geometry.">RenderEngine</a> implementations:</p>
<ul>
<li>Scalability w.r.t. scene complexity<ul>
<li>For a fixed image size, we render a sequence of images with varying numbers of spheres.</li>
</ul>
</li>
<li>Scalability w.r.t. number of cameras<ul>
<li>For a fixed image size, render multiple cameras at the simplest and most complex scene complexities.</li>
</ul>
</li>
<li>Scalability w.r.t. image size<ul>
<li>With a single camera, we render multiple output images of varying sizes with both simple and complex scenes.</li>
</ul>
</li>
</ul>
<p>We examine those same properties for all three image types: color, depth, and label.</p>
<h2>Running the benchmark</h2>
<p>The benchmark can be executed as:</p>
<div class="fragment"><div class="line">bazel run <span class="comment">//geometry/benchmarking:render_benchmark</span></div></div><!-- fragment --><p>The output will be something akin to the following (although not identical; lines have been removed for brevity):</p>
<div class="fragment"><div class="line">Run on (12 X 4400 MHz CPU s)</div><div class="line">CPU Caches:</div><div class="line">  L1 Data 32K (x6)</div><div class="line">  L1 Instruction 32K (x6)</div><div class="line">  L2 Unified 256K (x6)</div><div class="line">  L3 Unified 12288K (x1)</div><div class="line">Load Average: 9.75, 4.65, 3.26</div><div class="line">------------------------------------------------------------------------------------  <span class="comment">// NOLINT(*)</span></div><div class="line">Benchmark                                          Time             CPU   Iterations  <span class="comment">// NOLINT(*)</span></div><div class="line">------------------------------------------------------------------------------------  <span class="comment">// NOLINT(*)</span></div><div class="line">RenderBenchmark/VtkColor/1/1/640/480           0.641 ms        0.641 ms         1026  <span class="comment">// NOLINT(*)</span></div><div class="line">RenderBenchmark/VtkColor/12/1/640/480          0.843 ms        0.843 ms          882  <span class="comment">// NOLINT(*)</span></div><div class="line">RenderBenchmark/VtkColor/120/1/640/480          2.58 ms         2.58 ms          280  <span class="comment">// NOLINT(*)</span></div><div class="line">RenderBenchmark/VtkColor/240/1/640/480          5.30 ms         5.30 ms          100  <span class="comment">// NOLINT(*)</span></div><div class="line">RenderBenchmark/VtkColor/480/1/640/480          9.10 ms         9.10 ms           79  <span class="comment">// NOLINT(*)</span></div><div class="line">RenderBenchmark/VtkColor/1200/1/640/480         23.4 ms         23.4 ms           30  <span class="comment">// NOLINT(*)</span></div><div class="line">RenderBenchmark/VtkColor/1/10/640/480           6.36 ms         6.36 ms          117  <span class="comment">// NOLINT(*)</span></div><div class="line">RenderBenchmark/VtkColor/1200/10/640/480         179 ms          179 ms            4  <span class="comment">// NOLINT(*)</span></div><div class="line">RenderBenchmark/VtkColor/1/1/320/240           0.267 ms        0.267 ms         2318  <span class="comment">// NOLINT(*)</span></div><div class="line">RenderBenchmark/VtkColor/1/1/1280/960           2.39 ms         2.39 ms          317  <span class="comment">// NOLINT(*)</span></div><div class="line">RenderBenchmark/VtkColor/1/1/2560/1920          11.5 ms         11.5 ms           65  <span class="comment">// NOLINT(*)</span></div><div class="line">RenderBenchmark/VtkColor/1200/1/320/240         24.1 ms         24.0 ms           30  <span class="comment">// NOLINT(*)</span></div><div class="line">RenderBenchmark/VtkColor/1200/1/1280/960        27.0 ms         26.9 ms           26  <span class="comment">// NOLINT(*)</span></div><div class="line">RenderBenchmark/VtkColor/1200/1/2560/1920       39.8 ms         39.7 ms           19  <span class="comment">// NOLINT(*)</span></div><div class="line">RenderBenchmark/GlColor/1/1/640/480            0.523 ms        0.480 ms         1382  <span class="comment">// NOLINT(*)</span></div><div class="line">RenderBenchmark/GlColor/12/1/640/480           0.553 ms        0.511 ms         1236  <span class="comment">// NOLINT(*)</span></div><div class="line">RenderBenchmark/GlColor/120/1/640/480          0.833 ms        0.790 ms          884  <span class="comment">// NOLINT(*)</span></div><div class="line">RenderBenchmark/GlColor/240/1/640/480           1.20 ms         1.15 ms          591  <span class="comment">// NOLINT(*)</span></div><div class="line">RenderBenchmark/GlColor/480/1/640/480           1.87 ms         1.83 ms          384  <span class="comment">// NOLINT(*)</span></div><div class="line">RenderBenchmark/GlColor/1200/1/640/480          3.76 ms         3.72 ms          188  <span class="comment">// NOLINT(*)</span></div><div class="line">RenderBenchmark/GlColor/1/10/640/480            4.98 ms         4.56 ms          137  <span class="comment">// NOLINT(*)</span></div><div class="line">RenderBenchmark/GlColor/1200/10/640/480         37.1 ms         36.6 ms           19  <span class="comment">// NOLINT(*)</span></div><div class="line">RenderBenchmark/GlColor/1/1/320/240            0.151 ms        0.147 ms         4830  <span class="comment">// NOLINT(*)</span></div><div class="line">RenderBenchmark/GlColor/1/1/1280/960            1.93 ms         1.88 ms          335  <span class="comment">// NOLINT(*)</span></div><div class="line">RenderBenchmark/GlColor/1/1/2560/1920           9.14 ms         9.08 ms           72  <span class="comment">// NOLINT(*)</span></div><div class="line">RenderBenchmark/GlColor/1200/1/320/240          3.46 ms         3.42 ms          199  <span class="comment">// NOLINT(*)</span></div><div class="line">RenderBenchmark/GlColor/1200/1/1280/960         5.29 ms         5.25 ms          127  <span class="comment">// NOLINT(*)</span></div><div class="line">RenderBenchmark/GlColor/1200/1/2560/1920        12.5 ms         12.5 ms           57  <span class="comment">// NOLINT(*)</span></div><div class="line">RenderBenchmark/VtkDepth/1/1/640/480            1.89 ms         1.89 ms          391  <span class="comment">// NOLINT(*)</span></div><div class="line">RenderBenchmark/GlDepth/1/1/640/480            0.486 ms        0.486 ms         1578  <span class="comment">// NOLINT(*)</span></div><div class="line">RenderBenchmark/VtkLabel/1/1/640/480            1.35 ms         1.35 ms          513  <span class="comment">// NOLINT(*)</span></div><div class="line">RenderBenchmark/GlLabel/1/1/640/480             1.34 ms         1.30 ms          521  <span class="comment">// NOLINT(*)</span></div></div><!-- fragment --><p>Additional configuration is possible via the following flags:</p><ul>
<li><b>save_image_path</b>: Enables saving the rendered images in the given location. Defaults to no saving.</li>
<li><b>show_window</b>: Whether to display the rendered images. Defaults to false.</li>
</ul>
<p>For example: </p><div class="fragment"><div class="line">bazel run <span class="comment">//geometry/benchmarking:render_benchmark -- \</span></div><div class="line"><span class="comment">   --save_image_path=&quot;/tmp&quot; --show_window=true</span></div></div><!-- fragment --><h4>Interpreting the benchmark</h4>
<p>Each line in the table represents a particular configuration of the benchmark parameters of the form:</p>
<div class="fragment"><div class="line">RenderBenchmark/TestName/sphere_count/camera_count/image_width/image_height</div></div><!-- fragment --><ul>
<li><b>TestName</b>: One of<ul>
<li><b>VtkColor</b>: Renders the color image from <a class="el" href="classdrake_1_1geometry_1_1render_1_1_render_engine_vtk.html" title="See documentation of MakeRenderEngineVtk().">RenderEngineVtk</a>.</li>
<li><b>VtkDepth</b>: Renders the depth image from <a class="el" href="classdrake_1_1geometry_1_1render_1_1_render_engine_vtk.html" title="See documentation of MakeRenderEngineVtk().">RenderEngineVtk</a>.</li>
<li><b>VtkLabel</b>: Renders the label image from <a class="el" href="classdrake_1_1geometry_1_1render_1_1_render_engine_vtk.html" title="See documentation of MakeRenderEngineVtk().">RenderEngineVtk</a>.</li>
<li><b>GlColor</b>: Renders the color image from <a class="el" href="classdrake_1_1geometry_1_1render_1_1_render_engine_gl.html" title="See documentation of MakeRenderEngineGl().">RenderEngineGl</a>.</li>
<li><b>GlDepth</b>: Renders the depth image from <a class="el" href="classdrake_1_1geometry_1_1render_1_1_render_engine_gl.html" title="See documentation of MakeRenderEngineGl().">RenderEngineGl</a>.</li>
<li><b>GlLabel</b>: Renders the label image from <a class="el" href="classdrake_1_1geometry_1_1render_1_1_render_engine_gl.html" title="See documentation of MakeRenderEngineGl().">RenderEngineGl</a>.</li>
</ul>
</li>
<li><b>sphere_count</b>: The total number of spheres.</li>
<li><b>camera_count</b>: Simply the number of independent cameras being rendered. The cameras are all co-located (same position, same view direction) so they each render the same image.</li>
<li><b>image width</b> and <b>image_height</b>: The dimensions of the output image in pixels.</li>
</ul>
<p>The <code>Time</code> and <code>CPU</code> columns are measures of the average time it took to create a single frame for all the specified cameras. The <code>Iterations</code> indicates how often the action was performed to compute the average value. For more information see the <a href="https://github.com/google/benchmark">google benchmark documentation</a>.</p>
<p>Now we can analyze the example output and draw some example inferences (not a complete set of valid inferences):</p>
<ul>
<li>Frame cost scales linearly with the number of cameras.<ul>
<li>For <a class="el" href="classdrake_1_1geometry_1_1render_1_1_render_engine_vtk.html" title="See documentation of MakeRenderEngineVtk().">RenderEngineVtk</a> a 10X increase in number of cameras leads to a 10X increase in time for both color and depth, but a (roughly) 20X increase for label.</li>
</ul>
</li>
<li><a class="el" href="classdrake_1_1geometry_1_1render_1_1_render_engine_gl.html" title="See documentation of MakeRenderEngineGl().">RenderEngineGl</a> scales better with respect to scene complexity than <a class="el" href="classdrake_1_1geometry_1_1render_1_1_render_engine_vtk.html" title="See documentation of MakeRenderEngineVtk().">RenderEngineVtk</a>. </li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- footer -->
<div id="nav-path" class="navpath">
  <ul>
  </ul>
</div>
<script type="text/javascript">
searchBox.searchLabel = 'Go to name…';
searchBox.DOMSearchField().value = searchBox.searchLabel;
</script>
</body>
</html>
