<!-- HTML header for doxygen 1.14.0-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.14.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Drake: Accuracy, Tolerance, and Precision</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(function() { init_search(); });
</script>
<script type="text/javascript">
window.MathJax = {
  options: {
    ignoreHtmlClass: 'tex2jax_ignore',
    processHtmlClass: 'tex2jax_process'
  }
};
</script>
<script type="text/javascript" id="MathJax-script" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen_extra.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<header class="site-header">
 <div class="site-header-inner contain">
  <a class="drake-logo" href="/"><img src="/images/drake-logo-white.svg"></a>
  <div class="menu-mobile-toggle">
   <span></span>
  </div>
  <nav class="site-menu">
   <ul>
    <li class="site-menu-item site-menu-item-main">
     <a class="site-menu-item" href="/">Home</a>
    </li>
    <li class="site-menu-item site-menu-item-main">
     <a class="site-menu-item" href="/installation.html">Installation</a>
    </li>
    <li class="site-menu-item site-menu-item-main">
     <a class="site-menu-item" href="/gallery.html">Gallery</a>
    </li>
    <li class="site-menu-item site-menu-item-main">API Documentation
     <div class="sub">
      <a class="site-menu-item" href="/doxygen_cxx/index.html">C++</a>
      <a class="site-menu-item" href="/pydrake/index.html">Python</a>
     </div>
    </li>
    <li class="site-menu-item site-menu-item-main">Resources
     <div class="sub">
      <a class="site-menu-item" href="/getting_help.html">Getting Help</a>
      <a class="site-menu-item" href="https://deepnote.com/workspace/Drake-0b3b2c53-a7ad-441b-80f8-bf8350752305/project/Tutorials-2b4fc509-aef2-417d-a40d-6071dfed9199/notebook/index-753e3c9d261247ba9f0eb1d7868c18c8">Tutorials</a>
      <a class="site-menu-item" href="/python_bindings.html">Python Bindings</a>
      <a class="site-menu-item" href="/developers.html">For Developers</a>
      <a class="site-menu-item" href="/credits.html">Credits</a>
     </div>
    </li>
    <li class="github-link">
     <a class="site-menu-item" href="https://github.com/RobotLocomotion/drake">GitHub <img src="/third_party/images/GitHub-Mark-Light-64px.png"></a>
    </li>
   </ul>
  </nav>
 </div>
</header>
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Drake
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<div class="title-banner">
 <div class="title-banner__title">
  Drake C++ Documentation
 </div>
 <div id="DDGSearch">
  <form id="search_form_cpp" class="wy_form" action="https://google.com/search" method="get">
   <input type="text" name="q" placeholder="Search C++ API only…">
   <input type="hidden" name="q" value="site:drake.mit.edu/doxygen_cxx">
  </form>
  <form id="search_form" class="wy_form" action="https://google.com/search" method="get">
   <input type="text" name="q" placeholder="Search all of Drake…">
   <input type="hidden" name="q" value="site:drake.mit.edu OR site:underactuated.csail.mit.edu OR site:manipulation.csail.mit.edu">
  </form>
 </div>
 <div id="MSearchBoxContainer">
  <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect" class="search-icon" onmouseover="return searchBox.OnSearchSelectShow()" onmouseout="return searchBox.OnSearchSelectHide()"><span class="search-icon-dropdown"></span></span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><div id="MSearchCloseImg" class="close-icon"></div></a>
          </span>
        </div>
</td>
 </div>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.14.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('group__accuracy__and__tolerance.html','',''); });
</script>
<div id="container">
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">Accuracy, Tolerance, and Precision <div class="ingroups"><a class="el" href="group__terminology__and__notation.html">Drake Terminology and Notation</a></div></div></div>
</div><!--header-->
<div class="contents">
<p>Most numerical methods are approximate, and many can trade speed for quality under user control. </p>
<p>We need standard, unambiguous terminology in Drake for requesting and reporting solution quality. The terms "tolerance", "accuracy", and "precision" are commonly used in this context but often imprecisely. Below we present how these terms should be used in Drake, following ref. <a href="https://dx.doi.org/10.1016/j.piutam.2011.04.023">[1]</a>. (Some Drake code and documentation may not follow these conventions for historical reasons. If you spot any violations, please add them to issue <a href="https://github.com/RobotLocomotion/drake/issues/13271">#13271</a> so we can modernize.)</p>
<h3>accuracy</h3>
<p><span class="tt">accuracy</span> α is a unitless quantity describing permissible relative error. (This is similar to the "relative tolerance" <span class="tt">rtol</span> parameter in many numerical packages, including some commonly used with Drake.) Ideally you can think of <span class="tt">accuracy</span> as specifying the number of correct significant digits in the desired result. For example, specifying <span class="tt">α = 10⁻³</span> should yield a result correct to three digits while <span class="tt">α = 10⁻⁶</span> should give six. This is a Platonic ideal that cannot always be achieved perfectly in practice, but Drake algorithms should attempt to respond to a user's <span class="tt">accuracy</span> request in approximately this way.</p>
<p>We use the unambiguous terms "tight/tighter/tighten accuracy" and "loose/looser/loosen accuracy" in preference to "high/more/increase" or "low/less/decrease" which are prone to being misunderstood due to the fact that numerically smaller values correspond to more (tighter) accuracy.</p>
<h3>tolerance</h3>
<p>We use <span class="tt">tolerance</span> to mean a permissible absolute error ε, which is a quantity with units. (This is similar to the "absolute tolerance" <span class="tt">atol</span> parameter in many numerical packages, including some commonly used with Drake.) So "constraint tolerance" is the amount by which a user is willing to have a constraint violated, in units appropriate to that constraint. Thus a tolerance ε=10⁻⁴ for a position constraint means that an error of 0.1mm is acceptable.</p>
<p>In code we often abbreviate <span class="tt">tolerance</span> as <span class="tt">tol</span>, but prefer the longer spelling in documentation.</p>
<h3>precision</h3>
<p>We do not use this term in Drake in the context of solution quality in numerical algorithms. Instead we reserve it for the Machine Learning term-of-art as in "precision and recall". "Precision" is also conventionally used in the context of floating point arithmetic, such as "double precision" and "machine precision".</p>
<h3>Given accuracy, we can determine tolerance</h3>
<p>In Drake numerical tests and error controlled numerical methods, we typically determine an absolute tolerance using the user-supplied <span class="tt">accuracy</span> value α, via <span class="tt">ε = α|q|</span> where q is the quantity of interest. This works well provided that <span class="tt">|q| ≫ 0</span>. When q is near zero the tolerance ε could be absurdly tight, and if q were exactly zero then we would have a tolerance of zero, meaning only a perfect solution would be acceptable. That is not achievable on a real computer and is why many packages require a user-specified "absolute tolerance" that is used only for quantities near zero. This is an awkward requirement for users however, since tolerance is inherently a quantity with units and most systems have variables of mixed units. So while <span class="tt">accuracy</span> applies equally to all quantities and is easy to determine (how many digits do you want in the answer?), <span class="tt">tolerance</span> needs to be worked out for each quantity. That is rarely done in practice.</p>
<p>An alternative method, preferred for Drake algorithms, is to make use of known system scaling. For example, if we know a "unit length" ℓ (this is also called a "characteristic length") for a system we can translate accuracy into tolerance via <span class="tt">ε = αℓ</span>. Similarly we can define unit angle, time, and so on. This leads to the following computation of absolute tolerance ε, given only the user's requested accuracy α: </p><pre class="fragment">(1)    ε = α max(μ, |q|)
</pre><p>where μ is the "unit" or "characteristic" value in the same units as the quantity of interest q. Because of Drake's use of MKS units and typical use for human-scale robots, μ is almost always set to 1 or 0.1. Thus it is typically possible to make a good guess at μ, which we have found works about as well or better than trying to collect a bunch of absolute tolerances from users with more important things on their minds.</p>
<p>You will see variants of the above Equation (1) used in many of Drake's algorithms and test cases. Please use a similar method and similar terminology in your own Drake contributions, unless you can make a strong argument that something else is necessary.</p>
<ul>
<li>[1] M. Sherman, A. Seth, S. Delp. Procedia IUTAM 2:241-261 (2011), Section 3.3. <a href="https://dx.doi.org/10.1016/j.piutam.2011.04.023">https://dx.doi.org/10.1016/j.piutam.2011.04.023</a> </li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<div id="page-nav" class="page-nav-panel">
<div id="page-nav-resize-handle"></div>
<div id="page-nav-tree">
<div id="page-nav-contents">
</div><!-- page-nav-contents -->
</div><!-- page-nav-tree -->
</div><!-- page-nav -->
</div><!-- container -->
<!-- footer -->
<div class="navpath">
  <ul>
  </ul>
</div>
<footer id="nav-path", class="site-footer padding">
  <div class="contain">
    <a href="/" class="drake-logo">
      <img src="/images/drake-logo.svg"/>
    </a>
    <div class="footer-menu">
      <ul>    
        <li>
          <a href="/doxygen_cxx/index.html" class="site-menu-item">C++</a>
        </li>    
        <li>
          <a href="/pydrake/index.html" class="site-menu-item">Python</a>
        </li>
        <li class="github-link">
          <a href="https://github.com/RobotLocomotion/drake" class="site-menu-item">GitHub <img src="/third_party/images/GitHub-Mark-64px.png"/></a>
        </li>
      </ul>
    </div>
  </div>
</footer>
<script type="text/javascript">
searchBox.searchLabel = 'Go to name…';
searchBox.DOMSearchField().placeholder = searchBox.searchLabel;
searchBox.DOMSearchField().value = '';
</script>
</body>
</html>
