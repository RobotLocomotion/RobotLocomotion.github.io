<!-- HTML header for doxygen 1.8.15-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Drake: FemModel&lt; T &gt; Class Template Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen_extra.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Drake
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
   <td>
    <div id="DDGSearch">
     <form id="ddg-search-form" class="wy_form" action="https://duckduckgo.com/" method="get">
      <input type="text" name="q" placeholder="Search C++ API only…" />
      <input type="hidden" name="sites" value="drake.mit.edu/doxygen_cxx" />
     </form>
     <form id="ddg-search-form" class="wy_form" action="https://duckduckgo.com/" method="get">
      <input type="text" name="q" placeholder="Search all of Drake…" />
      <input type="hidden" name="sites" value="drake.mit.edu" />
     </form>
    </div">
   </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.15 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('classdrake_1_1multibody_1_1fem_1_1_fem_model.html','');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="classdrake_1_1multibody_1_1fem_1_1_fem_model-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">FemModel&lt; T &gt; Class Template Reference<span class="mlabels"><span class="mlabel">abstract</span></span></div>  </div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><h3>template&lt;typename T&gt;<br />
class drake::multibody::fem::FemModel&lt; T &gt;</h3>

<p>FemModel calculates the components of the spatially discretized FEM equations for dynamic elasticity problems. </p>
<p>Typically, in dynamic elasticity problems, we are interested in the mapping that describes the motion of a material </p><pre class="fragment">ϕ(⋅,t) : Ω⁰ → Ωᵗ,
</pre><p>where Ω⁰ and Ωᵗ are subsets of R³, along with its first and second derivatives (velocity and acceleration respectively): </p><pre class="fragment">V(⋅,t) = ∂ϕ(⋅,t)/∂t,
A(⋅,t) = ∂²ϕ(⋅,t)/∂t².
</pre><p>We call Ω⁰ the reference domain and Ωᵗ the current domain. We use upper case letters to denote states (positions, velocities, and accelerations) in reference domain (X, V, A) and lower case letters to denote their current domain counterparts (x, v, a). In particular, x(X,t) = ϕ(X,t). The deformation gradient F(X,t) is given by ∂ϕ(X,t)/∂X.</p>
<p>The governing equations of interest are conservation of mass and conservation of momentum: </p><pre class="fragment">R(X,t)J(X,t) = R(X,0),
R(X,0)A(X,t) = fᵢₙₜ(X,t) + fₑₓₜ(X,t),
</pre><p>where R is mass density, fᵢₙₜ and fₑₓₜ are internal and external force (only gravity for now) densities respectively, and J is the determinant of the deformation gradient. Using finite element method to discretize in space, one gets </p><pre class="fragment">ϕ(X,t) = ∑ᵢ xᵢ(t)Nᵢ(X)
V(X,t) = ∑ᵢ vᵢ(t)Nᵢ(X)
A(X,t) = ∑ᵢ aᵢ(t)Nᵢ(X)
</pre><p>where xᵢ, vᵢ, aᵢ ∈ R³ are nodal values of the spatially discretized position, velocity and acceleration, and Nᵢ(X):Ω⁰ → R are the the basis functions. With this spatial discretization, the PDE is turned into an ODE of the form </p><pre class="fragment">G(x, v, a) = 0,            (1)
</pre><p>where x, v, a are the stacked xᵢ, vᵢ, aᵢ. FemModel provides methods to query various information about equation (1) and its derivatives given an FEM state (x, v, a).</p>
<p>We implement FemModel in FemModelImpl that templatizes on the type of FemElement. Many functionalities provided by FemModel (e.g. <a class="el" href="classdrake_1_1multibody_1_1fem_1_1_fem_model.html#aeea8e3ba0e177fce247656c15183cdc3" title="Calculates an approximated tangent matrix evaluated at the given FEM state (or an approximation there...">CalcTangentMatrix()</a>) involve evaluating computationally intensive loops over FEM elements, and the overhead caused by virtual methods may be significant. We implement those functions in FemModelImpl templated on the FemElement to avoid the overhead of virtual methods. The type information at compile time also helps eliminate heap allocations.</p>
<p>Sifakis, Eftychios, and Jernej Barbič. "Finite element method simulation of 3d
deformable solids." Synthesis Lectures on Visual Computing: Computer Graphics, Animation, Computational Photography, and Imaging 1.1 (2015): 1-69.</p>
<dl class="tparams"><dt>Template Parameters</dt><dd>
  <table class="tparams">
    <tr><td class="paramname">T</td><td>The scalar type, which must be one of the <a class="el" href="group__default__scalars.html">default nonsymbolic scalars</a>. </td></tr>
  </table>
  </dd>
</dl>
</div>
<p><code>#include &lt;drake/multibody/fem/fem_model.h&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdrake_1_1multibody_1_1fem_1_1_fem_model_1_1_builder.html">Builder</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Builder that builds the <a class="el" href="classdrake_1_1multibody_1_1fem_1_1_fem_model.html" title="FemModel calculates the components of the spatially discretized FEM equations for dynamic elasticity ...">FemModel</a>.  <a href="classdrake_1_1multibody_1_1fem_1_1_fem_model_1_1_builder.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a4534d41423f7c3fd5763b65f0421e3af"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdrake_1_1multibody_1_1fem_1_1_fem_model.html#a4534d41423f7c3fd5763b65f0421e3af">~FemModel</a> ()=default</td></tr>
<tr class="separator:a4534d41423f7c3fd5763b65f0421e3af"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a90e3616a403cd3f26b9aae1ffe0ec76c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classint.html">int</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdrake_1_1multibody_1_1fem_1_1_fem_model.html#a90e3616a403cd3f26b9aae1ffe0ec76c">num_nodes</a> () const</td></tr>
<tr class="memdesc:a90e3616a403cd3f26b9aae1ffe0ec76c"><td class="mdescLeft">&#160;</td><td class="mdescRight">The number of nodes that are associated with this model.  <a href="#a90e3616a403cd3f26b9aae1ffe0ec76c">More...</a><br /></td></tr>
<tr class="separator:a90e3616a403cd3f26b9aae1ffe0ec76c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af4e031e8d885172740f7f66f07234f7f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classint.html">int</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdrake_1_1multibody_1_1fem_1_1_fem_model.html#af4e031e8d885172740f7f66f07234f7f">num_dofs</a> () const</td></tr>
<tr class="memdesc:af4e031e8d885172740f7f66f07234f7f"><td class="mdescLeft">&#160;</td><td class="mdescRight">The number of degrees of freedom in this model.  <a href="#af4e031e8d885172740f7f66f07234f7f">More...</a><br /></td></tr>
<tr class="separator:af4e031e8d885172740f7f66f07234f7f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7596bc2928432a0ac2271bc9184d692e"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="classint.html">int</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdrake_1_1multibody_1_1fem_1_1_fem_model.html#a7596bc2928432a0ac2271bc9184d692e">num_elements</a> () const =0</td></tr>
<tr class="memdesc:a7596bc2928432a0ac2271bc9184d692e"><td class="mdescLeft">&#160;</td><td class="mdescRight">The number of FEM elements in this model.  <a href="#a7596bc2928432a0ac2271bc9184d692e">More...</a><br /></td></tr>
<tr class="separator:a7596bc2928432a0ac2271bc9184d692e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aef81f0727ef93e6f31d39e6521c30198"><td class="memItemLeft" align="right" valign="top">std::unique_ptr&lt; <a class="el" href="classdrake_1_1multibody_1_1fem_1_1_fem_state.html">FemState</a>&lt; T &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdrake_1_1multibody_1_1fem_1_1_fem_model.html#aef81f0727ef93e6f31d39e6521c30198">MakeFemState</a> () const</td></tr>
<tr class="memdesc:aef81f0727ef93e6f31d39e6521c30198"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates a default <a class="el" href="classdrake_1_1multibody_1_1fem_1_1_fem_state.html" title="FemState provides access to private workspace FEM state and per-element state-dependent data.">FemState</a> compatible with this model.  <a href="#aef81f0727ef93e6f31d39e6521c30198">More...</a><br /></td></tr>
<tr class="separator:aef81f0727ef93e6f31d39e6521c30198"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afb7ba3a5b7f7fdc4d7aa6ffd34334639"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdrake_1_1multibody_1_1fem_1_1_fem_model.html#afb7ba3a5b7f7fdc4d7aa6ffd34334639">CalcResidual</a> (const <a class="el" href="classdrake_1_1multibody_1_1fem_1_1_fem_state.html">FemState</a>&lt; T &gt; &amp;fem_state, <a class="el" href="classdrake_1_1_eigen_ptr.html">EigenPtr</a>&lt; <a class="el" href="namespacedrake.html#a77dd228fb4dd66a2c17dd3f7f38ffd85">VectorX</a>&lt; T &gt;&gt; residual) const</td></tr>
<tr class="memdesc:afb7ba3a5b7f7fdc4d7aa6ffd34334639"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculates the residual G(x, v, a) (see class doc) evaluated at the given FEM state.  <a href="#afb7ba3a5b7f7fdc4d7aa6ffd34334639">More...</a><br /></td></tr>
<tr class="separator:afb7ba3a5b7f7fdc4d7aa6ffd34334639"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeea8e3ba0e177fce247656c15183cdc3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdrake_1_1multibody_1_1fem_1_1_fem_model.html#aeea8e3ba0e177fce247656c15183cdc3">CalcTangentMatrix</a> (const <a class="el" href="classdrake_1_1multibody_1_1fem_1_1_fem_state.html">FemState</a>&lt; T &gt; &amp;fem_state, const <a class="el" href="namespacedrake.html#a0ad29daab565ce347c4d1c5aae6a76c2">Vector3</a>&lt; T &gt; &amp;weights, internal::PetscSymmetricBlockSparseMatrix *tangent_matrix) const</td></tr>
<tr class="memdesc:aeea8e3ba0e177fce247656c15183cdc3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculates an approximated tangent matrix evaluated at the given FEM state (or an approximation thereof).  <a href="#aeea8e3ba0e177fce247656c15183cdc3">More...</a><br /></td></tr>
<tr class="separator:aeea8e3ba0e177fce247656c15183cdc3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5bedc095ca6d9b111016dc52ce60b355"><td class="memItemLeft" align="right" valign="top">std::unique_ptr&lt; internal::PetscSymmetricBlockSparseMatrix &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdrake_1_1multibody_1_1fem_1_1_fem_model.html#a5bedc095ca6d9b111016dc52ce60b355">MakePetscSymmetricBlockSparseTangentMatrix</a> () const</td></tr>
<tr class="memdesc:a5bedc095ca6d9b111016dc52ce60b355"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates a PetscSymmetricBlockSparseMatrix that has the sparsity pattern of the tangent matrix of this FEM model.  <a href="#a5bedc095ca6d9b111016dc52ce60b355">More...</a><br /></td></tr>
<tr class="separator:a5bedc095ca6d9b111016dc52ce60b355"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2a8f7cd0b02dc8b1f09fa0b3f17c2df1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdrake_1_1multibody_1_1fem_1_1_fem_model.html#a2a8f7cd0b02dc8b1f09fa0b3f17c2df1">set_gravity_vector</a> (const <a class="el" href="namespacedrake.html#a0ad29daab565ce347c4d1c5aae6a76c2">Vector3</a>&lt; T &gt; &amp;gravity)</td></tr>
<tr class="memdesc:a2a8f7cd0b02dc8b1f09fa0b3f17c2df1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the gravity vector for all elements in this model.  <a href="#a2a8f7cd0b02dc8b1f09fa0b3f17c2df1">More...</a><br /></td></tr>
<tr class="separator:a2a8f7cd0b02dc8b1f09fa0b3f17c2df1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:affd39c2fd943159f17578fc4a6d3a71e"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="namespacedrake.html#a0ad29daab565ce347c4d1c5aae6a76c2">Vector3</a>&lt; T &gt; &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdrake_1_1multibody_1_1fem_1_1_fem_model.html#affd39c2fd943159f17578fc4a6d3a71e">gravity_vector</a> () const</td></tr>
<tr class="memdesc:affd39c2fd943159f17578fc4a6d3a71e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the gravity vector for all elements in this model.  <a href="#affd39c2fd943159f17578fc4a6d3a71e">More...</a><br /></td></tr>
<tr class="separator:affd39c2fd943159f17578fc4a6d3a71e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr><td colspan="2"><div class="groupHeader">Does not allow copy, move, or assignment</div></td></tr>
<tr class="memitem:af7127cb41cf465a47db9080be52cbf91"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdrake_1_1multibody_1_1fem_1_1_fem_model.html#af7127cb41cf465a47db9080be52cbf91">FemModel</a> (const <a class="el" href="classdrake_1_1multibody_1_1fem_1_1_fem_model.html">FemModel</a> &amp;)=delete</td></tr>
<tr class="separator:af7127cb41cf465a47db9080be52cbf91"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a52811120b5134c610e2af3fc096c92af"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classdrake_1_1multibody_1_1fem_1_1_fem_model.html">FemModel</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdrake_1_1multibody_1_1fem_1_1_fem_model.html#a52811120b5134c610e2af3fc096c92af">operator=</a> (const <a class="el" href="classdrake_1_1multibody_1_1fem_1_1_fem_model.html">FemModel</a> &amp;)=delete</td></tr>
<tr class="separator:a52811120b5134c610e2af3fc096c92af"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3c8ae430d8de186fa6b8125c1e182906"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdrake_1_1multibody_1_1fem_1_1_fem_model.html#a3c8ae430d8de186fa6b8125c1e182906">FemModel</a> (<a class="el" href="classdrake_1_1multibody_1_1fem_1_1_fem_model.html">FemModel</a> &amp;&amp;)=delete</td></tr>
<tr class="separator:a3c8ae430d8de186fa6b8125c1e182906"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a22e6cae04151e6b39cf8ceecfc7f4cf9"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classdrake_1_1multibody_1_1fem_1_1_fem_model.html">FemModel</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdrake_1_1multibody_1_1fem_1_1_fem_model.html#a22e6cae04151e6b39cf8ceecfc7f4cf9">operator=</a> (<a class="el" href="classdrake_1_1multibody_1_1fem_1_1_fem_model.html">FemModel</a> &amp;&amp;)=delete</td></tr>
<tr class="separator:a22e6cae04151e6b39cf8ceecfc7f4cf9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:a2bcebe0224e78e72f3c664de4801e8dd"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdrake_1_1multibody_1_1fem_1_1_fem_model.html#a2bcebe0224e78e72f3c664de4801e8dd">FemModel</a> ()</td></tr>
<tr class="memdesc:a2bcebe0224e78e72f3c664de4801e8dd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructs an empty FEM model.  <a href="#a2bcebe0224e78e72f3c664de4801e8dd">More...</a><br /></td></tr>
<tr class="separator:a2bcebe0224e78e72f3c664de4801e8dd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a93f9e9287217253c4148bcff802b0fd6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdrake_1_1multibody_1_1fem_1_1_fem_model.html#a93f9e9287217253c4148bcff802b0fd6">ThrowIfModelStateIncompatible</a> (const char *func, const <a class="el" href="classdrake_1_1multibody_1_1fem_1_1_fem_state.html">FemState</a>&lt; T &gt; &amp;fem_state) const</td></tr>
<tr class="memdesc:a93f9e9287217253c4148bcff802b0fd6"><td class="mdescLeft">&#160;</td><td class="mdescRight">(Internal use only) Throws std::exception to report a mismatch between the FEM model and state that were passed to API method <code>func</code>.  <a href="#a93f9e9287217253c4148bcff802b0fd6">More...</a><br /></td></tr>
<tr class="separator:a93f9e9287217253c4148bcff802b0fd6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1255ca32db4bae2e53394d503b563c00"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="namespacedrake.html#a77dd228fb4dd66a2c17dd3f7f38ffd85">VectorX</a>&lt; T &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdrake_1_1multibody_1_1fem_1_1_fem_model.html#a1255ca32db4bae2e53394d503b563c00">MakeReferencePositions</a> () const =0</td></tr>
<tr class="memdesc:a1255ca32db4bae2e53394d503b563c00"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the reference positions of this model.  <a href="#a1255ca32db4bae2e53394d503b563c00">More...</a><br /></td></tr>
<tr class="separator:a1255ca32db4bae2e53394d503b563c00"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9c156c34378cf3221bc26e474ac10327"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdrake_1_1multibody_1_1fem_1_1_fem_model.html#a9c156c34378cf3221bc26e474ac10327">DoCalcResidual</a> (const <a class="el" href="classdrake_1_1multibody_1_1fem_1_1_fem_state.html">FemState</a>&lt; T &gt; &amp;fem_state, <a class="el" href="classdrake_1_1_eigen_ptr.html">EigenPtr</a>&lt; <a class="el" href="namespacedrake.html#a77dd228fb4dd66a2c17dd3f7f38ffd85">VectorX</a>&lt; T &gt;&gt; residual) const =0</td></tr>
<tr class="memdesc:a9c156c34378cf3221bc26e474ac10327"><td class="mdescLeft">&#160;</td><td class="mdescRight">FemModelImpl must override this method to provide an implementation for the NVI <a class="el" href="classdrake_1_1multibody_1_1fem_1_1_fem_model.html#afb7ba3a5b7f7fdc4d7aa6ffd34334639" title="Calculates the residual G(x, v, a) (see class doc) evaluated at the given FEM state.">CalcResidual()</a>.  <a href="#a9c156c34378cf3221bc26e474ac10327">More...</a><br /></td></tr>
<tr class="separator:a9c156c34378cf3221bc26e474ac10327"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a539075a144b96a126aee2e0b2963db95"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdrake_1_1multibody_1_1fem_1_1_fem_model.html#a539075a144b96a126aee2e0b2963db95">DoCalcTangentMatrix</a> (const <a class="el" href="classdrake_1_1multibody_1_1fem_1_1_fem_state.html">FemState</a>&lt; T &gt; &amp;fem_state, const <a class="el" href="namespacedrake.html#a0ad29daab565ce347c4d1c5aae6a76c2">Vector3</a>&lt; T &gt; &amp;weights, internal::PetscSymmetricBlockSparseMatrix *tangent_matrix) const =0</td></tr>
<tr class="memdesc:a539075a144b96a126aee2e0b2963db95"><td class="mdescLeft">&#160;</td><td class="mdescRight">FemModelImpl must override this method to provide an implementation for the NVI <a class="el" href="classdrake_1_1multibody_1_1fem_1_1_fem_model.html#aeea8e3ba0e177fce247656c15183cdc3" title="Calculates an approximated tangent matrix evaluated at the given FEM state (or an approximation there...">CalcTangentMatrix()</a>.  <a href="#a539075a144b96a126aee2e0b2963db95">More...</a><br /></td></tr>
<tr class="separator:a539075a144b96a126aee2e0b2963db95"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5170f577cbc8446b3969e9e308019bdf"><td class="memItemLeft" align="right" valign="top">virtual std::unique_ptr&lt; internal::PetscSymmetricBlockSparseMatrix &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdrake_1_1multibody_1_1fem_1_1_fem_model.html#a5170f577cbc8446b3969e9e308019bdf">DoMakePetscSymmetricBlockSparseTangentMatrix</a> () const =0</td></tr>
<tr class="memdesc:a5170f577cbc8446b3969e9e308019bdf"><td class="mdescLeft">&#160;</td><td class="mdescRight">FemModelImpl must override this method to provide an implementation for the NVI <a class="el" href="classdrake_1_1multibody_1_1fem_1_1_fem_model.html#a5bedc095ca6d9b111016dc52ce60b355" title="Creates a PetscSymmetricBlockSparseMatrix that has the sparsity pattern of the tangent matrix of this...">MakePetscSymmetricBlockSparseTangentMatrix()</a>.  <a href="#a5170f577cbc8446b3969e9e308019bdf">More...</a><br /></td></tr>
<tr class="separator:a5170f577cbc8446b3969e9e308019bdf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7bd928c1298c6e5939d3bd2559e18e71"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdrake_1_1multibody_1_1fem_1_1_fem_model.html#a7bd928c1298c6e5939d3bd2559e18e71">UpdateFemStateSystem</a> ()</td></tr>
<tr class="memdesc:a7bd928c1298c6e5939d3bd2559e18e71"><td class="mdescLeft">&#160;</td><td class="mdescRight">Updates the system that manages the states and the cache entries of this FEM model.  <a href="#a7bd928c1298c6e5939d3bd2559e18e71">More...</a><br /></td></tr>
<tr class="separator:a7bd928c1298c6e5939d3bd2559e18e71"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4e0e23b8877740039d58b314565edf8b"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdrake_1_1multibody_1_1fem_1_1_fem_model.html#a4e0e23b8877740039d58b314565edf8b">DeclareCacheEntries</a> (internal::FemStateSystem&lt; T &gt; *<a class="el" href="classdrake_1_1multibody_1_1fem_1_1_fem_model.html#a007a1278d4d247d81ed980ab3652e65d">fem_state_system</a>)=0</td></tr>
<tr class="memdesc:a4e0e23b8877740039d58b314565edf8b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Derived classes should override this method to declare cache entries in the given <code>fem_state_system</code>.  <a href="#a4e0e23b8877740039d58b314565edf8b">More...</a><br /></td></tr>
<tr class="separator:a4e0e23b8877740039d58b314565edf8b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a007a1278d4d247d81ed980ab3652e65d"><td class="memItemLeft" align="right" valign="top">const internal::FemStateSystem&lt; T &gt; &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdrake_1_1multibody_1_1fem_1_1_fem_model.html#a007a1278d4d247d81ed980ab3652e65d">fem_state_system</a> () const</td></tr>
<tr class="memdesc:a007a1278d4d247d81ed980ab3652e65d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the FemStateSystem that manages the states and cache entries in this FemModel.  <a href="#a007a1278d4d247d81ed980ab3652e65d">More...</a><br /></td></tr>
<tr class="separator:a007a1278d4d247d81ed980ab3652e65d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="af7127cb41cf465a47db9080be52cbf91"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af7127cb41cf465a47db9080be52cbf91">&#9670;&nbsp;</a></span>FemModel() <span class="overload">[1/3]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classdrake_1_1multibody_1_1fem_1_1_fem_model.html">FemModel</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classdrake_1_1multibody_1_1fem_1_1_fem_model.html">FemModel</a>&lt; T &gt; &amp;&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">delete</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a3c8ae430d8de186fa6b8125c1e182906"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3c8ae430d8de186fa6b8125c1e182906">&#9670;&nbsp;</a></span>FemModel() <span class="overload">[2/3]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classdrake_1_1multibody_1_1fem_1_1_fem_model.html">FemModel</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classdrake_1_1multibody_1_1fem_1_1_fem_model.html">FemModel</a>&lt; T &gt; &amp;&amp;&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">delete</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a4534d41423f7c3fd5763b65f0421e3af"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4534d41423f7c3fd5763b65f0421e3af">&#9670;&nbsp;</a></span>~FemModel()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual ~<a class="el" href="classdrake_1_1multibody_1_1fem_1_1_fem_model.html">FemModel</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span><span class="mlabel">default</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a2bcebe0224e78e72f3c664de4801e8dd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2bcebe0224e78e72f3c664de4801e8dd">&#9670;&nbsp;</a></span>FemModel() <span class="overload">[3/3]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classdrake_1_1multibody_1_1fem_1_1_fem_model.html">FemModel</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Constructs an empty FEM model. </p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="afb7ba3a5b7f7fdc4d7aa6ffd34334639"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afb7ba3a5b7f7fdc4d7aa6ffd34334639">&#9670;&nbsp;</a></span>CalcResidual()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CalcResidual </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classdrake_1_1multibody_1_1fem_1_1_fem_state.html">FemState</a>&lt; T &gt; &amp;&#160;</td>
          <td class="paramname"><em>fem_state</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classdrake_1_1_eigen_ptr.html">EigenPtr</a>&lt; <a class="el" href="namespacedrake.html#a77dd228fb4dd66a2c17dd3f7f38ffd85">VectorX</a>&lt; T &gt;&gt;&#160;</td>
          <td class="paramname"><em>residual</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Calculates the residual G(x, v, a) (see class doc) evaluated at the given FEM state. </p>
<dl class="section pre"><dt>Precondition</dt><dd>residual != nullptr. </dd></dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">std::exception</td><td>if the FEM state is incompatible with this model. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aeea8e3ba0e177fce247656c15183cdc3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeea8e3ba0e177fce247656c15183cdc3">&#9670;&nbsp;</a></span>CalcTangentMatrix()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CalcTangentMatrix </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classdrake_1_1multibody_1_1fem_1_1_fem_state.html">FemState</a>&lt; T &gt; &amp;&#160;</td>
          <td class="paramname"><em>fem_state</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="namespacedrake.html#a0ad29daab565ce347c4d1c5aae6a76c2">Vector3</a>&lt; T &gt; &amp;&#160;</td>
          <td class="paramname"><em>weights</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">internal::PetscSymmetricBlockSparseMatrix *&#160;</td>
          <td class="paramname"><em>tangent_matrix</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Calculates an approximated tangent matrix evaluated at the given FEM state (or an approximation thereof). </p>
<p>The tangent matrix is given by a weighted sum of stiffness matrix (∂G/∂x), damping matrix (∂G/∂v), and mass matrix (∂G/∂a). </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">fem_state</td><td>The <a class="el" href="classdrake_1_1multibody_1_1fem_1_1_fem_state.html" title="FemState provides access to private workspace FEM state and per-element state-dependent data.">FemState</a> used to evaluate the tangent matrix. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">weights</td><td>The weights used to combine stiffness, damping, and mass matrices (in that order) into the tangent matrix. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">tangent_matrix</td><td>The output tangent_matrix. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section pre"><dt>Precondition</dt><dd>tangent_matrix != nullptr. </dd>
<dd>
The size of <code>tangent_matrix</code> is <code><a class="el" href="classdrake_1_1multibody_1_1fem_1_1_fem_model.html#af4e031e8d885172740f7f66f07234f7f" title="The number of degrees of freedom in this model.">num_dofs()</a></code> * <code><a class="el" href="classdrake_1_1multibody_1_1fem_1_1_fem_model.html#af4e031e8d885172740f7f66f07234f7f" title="The number of degrees of freedom in this model.">num_dofs()</a></code>. </dd>
<dd>
All nonzero entries in the resulting tangent matrix have been allocated. See MakePetscSymmetricBlockSparseMatrix(). </dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>This function sometimes makes simplifying approximations to avoid taking overly complicated derivatives. As such, the resulting tangent matrix is usually an approximation of the actual value. </dd></dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">std::exception</td><td>if the FEM state is incompatible with this model. </td></tr>
    <tr><td class="paramname">std::exception</td><td>if T is not double. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a4e0e23b8877740039d58b314565edf8b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4e0e23b8877740039d58b314565edf8b">&#9670;&nbsp;</a></span>DeclareCacheEntries()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void DeclareCacheEntries </td>
          <td>(</td>
          <td class="paramtype">internal::FemStateSystem&lt; T &gt; *&#160;</td>
          <td class="paramname"><em>fem_state_system</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Derived classes should override this method to declare cache entries in the given <code>fem_state_system</code>. </p>

</div>
</div>
<a id="a9c156c34378cf3221bc26e474ac10327"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9c156c34378cf3221bc26e474ac10327">&#9670;&nbsp;</a></span>DoCalcResidual()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void DoCalcResidual </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classdrake_1_1multibody_1_1fem_1_1_fem_state.html">FemState</a>&lt; T &gt; &amp;&#160;</td>
          <td class="paramname"><em>fem_state</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classdrake_1_1_eigen_ptr.html">EigenPtr</a>&lt; <a class="el" href="namespacedrake.html#a77dd228fb4dd66a2c17dd3f7f38ffd85">VectorX</a>&lt; T &gt;&gt;&#160;</td>
          <td class="paramname"><em>residual</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>FemModelImpl must override this method to provide an implementation for the NVI <a class="el" href="classdrake_1_1multibody_1_1fem_1_1_fem_model.html#afb7ba3a5b7f7fdc4d7aa6ffd34334639" title="Calculates the residual G(x, v, a) (see class doc) evaluated at the given FEM state.">CalcResidual()</a>. </p>
<p>The input <code>fem_state</code> is guaranteed to be compatible with <code>this</code> FEM model, and the input <code>residual</code> is guaranteed to be non-null and properly sized. </p>

</div>
</div>
<a id="a539075a144b96a126aee2e0b2963db95"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a539075a144b96a126aee2e0b2963db95">&#9670;&nbsp;</a></span>DoCalcTangentMatrix()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void DoCalcTangentMatrix </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classdrake_1_1multibody_1_1fem_1_1_fem_state.html">FemState</a>&lt; T &gt; &amp;&#160;</td>
          <td class="paramname"><em>fem_state</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="namespacedrake.html#a0ad29daab565ce347c4d1c5aae6a76c2">Vector3</a>&lt; T &gt; &amp;&#160;</td>
          <td class="paramname"><em>weights</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">internal::PetscSymmetricBlockSparseMatrix *&#160;</td>
          <td class="paramname"><em>tangent_matrix</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>FemModelImpl must override this method to provide an implementation for the NVI <a class="el" href="classdrake_1_1multibody_1_1fem_1_1_fem_model.html#aeea8e3ba0e177fce247656c15183cdc3" title="Calculates an approximated tangent matrix evaluated at the given FEM state (or an approximation there...">CalcTangentMatrix()</a>. </p>
<p>The input <code>fem_state</code> is guaranteed to be compatible with <code>this</code> FEM model, and the input <code>tangent_matrix</code> is guaranteed to be non-null and properly sized. </p>

</div>
</div>
<a id="a5170f577cbc8446b3969e9e308019bdf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5170f577cbc8446b3969e9e308019bdf">&#9670;&nbsp;</a></span>DoMakePetscSymmetricBlockSparseTangentMatrix()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual std::unique_ptr&lt;internal::PetscSymmetricBlockSparseMatrix&gt; DoMakePetscSymmetricBlockSparseTangentMatrix </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>FemModelImpl must override this method to provide an implementation for the NVI <a class="el" href="classdrake_1_1multibody_1_1fem_1_1_fem_model.html#a5bedc095ca6d9b111016dc52ce60b355" title="Creates a PetscSymmetricBlockSparseMatrix that has the sparsity pattern of the tangent matrix of this...">MakePetscSymmetricBlockSparseTangentMatrix()</a>. </p>

</div>
</div>
<a id="a007a1278d4d247d81ed980ab3652e65d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a007a1278d4d247d81ed980ab3652e65d">&#9670;&nbsp;</a></span>fem_state_system()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const internal::FemStateSystem&lt;T&gt;&amp; fem_state_system </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns the FemStateSystem that manages the states and cache entries in this FemModel. </p>

</div>
</div>
<a id="affd39c2fd943159f17578fc4a6d3a71e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#affd39c2fd943159f17578fc4a6d3a71e">&#9670;&nbsp;</a></span>gravity_vector()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="namespacedrake.html#a0ad29daab565ce347c4d1c5aae6a76c2">Vector3</a>&lt;T&gt;&amp; gravity_vector </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the gravity vector for all elements in this model. </p>

</div>
</div>
<a id="aef81f0727ef93e6f31d39e6521c30198"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aef81f0727ef93e6f31d39e6521c30198">&#9670;&nbsp;</a></span>MakeFemState()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::unique_ptr&lt;<a class="el" href="classdrake_1_1multibody_1_1fem_1_1_fem_state.html">FemState</a>&lt;T&gt; &gt; MakeFemState </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Creates a default <a class="el" href="classdrake_1_1multibody_1_1fem_1_1_fem_state.html" title="FemState provides access to private workspace FEM state and per-element state-dependent data.">FemState</a> compatible with this model. </p>

</div>
</div>
<a id="a5bedc095ca6d9b111016dc52ce60b355"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5bedc095ca6d9b111016dc52ce60b355">&#9670;&nbsp;</a></span>MakePetscSymmetricBlockSparseTangentMatrix()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::unique_ptr&lt;internal::PetscSymmetricBlockSparseMatrix&gt; MakePetscSymmetricBlockSparseTangentMatrix </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Creates a PetscSymmetricBlockSparseMatrix that has the sparsity pattern of the tangent matrix of this FEM model. </p>
<p>In particular, the size of the tangent matrix is <code><a class="el" href="classdrake_1_1multibody_1_1fem_1_1_fem_model.html#af4e031e8d885172740f7f66f07234f7f" title="The number of degrees of freedom in this model.">num_dofs()</a></code> by <code><a class="el" href="classdrake_1_1multibody_1_1fem_1_1_fem_model.html#af4e031e8d885172740f7f66f07234f7f" title="The number of degrees of freedom in this model.">num_dofs()</a></code>. All entries are initialized to zero. </p><dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">std::exception</td><td>if T is not double. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a1255ca32db4bae2e53394d503b563c00"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1255ca32db4bae2e53394d503b563c00">&#9670;&nbsp;</a></span>MakeReferencePositions()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual <a class="el" href="namespacedrake.html#a77dd228fb4dd66a2c17dd3f7f38ffd85">VectorX</a>&lt;T&gt; MakeReferencePositions </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns the reference positions of this model. </p>

</div>
</div>
<a id="af4e031e8d885172740f7f66f07234f7f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af4e031e8d885172740f7f66f07234f7f">&#9670;&nbsp;</a></span>num_dofs()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classint.html">int</a> num_dofs </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The number of degrees of freedom in this model. </p>

</div>
</div>
<a id="a7596bc2928432a0ac2271bc9184d692e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7596bc2928432a0ac2271bc9184d692e">&#9670;&nbsp;</a></span>num_elements()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual <a class="el" href="classint.html">int</a> num_elements </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The number of FEM elements in this model. </p>

</div>
</div>
<a id="a90e3616a403cd3f26b9aae1ffe0ec76c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a90e3616a403cd3f26b9aae1ffe0ec76c">&#9670;&nbsp;</a></span>num_nodes()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classint.html">int</a> num_nodes </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The number of nodes that are associated with this model. </p>

</div>
</div>
<a id="a22e6cae04151e6b39cf8ceecfc7f4cf9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a22e6cae04151e6b39cf8ceecfc7f4cf9">&#9670;&nbsp;</a></span>operator=() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classdrake_1_1multibody_1_1fem_1_1_fem_model.html">FemModel</a>&amp; operator= </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classdrake_1_1multibody_1_1fem_1_1_fem_model.html">FemModel</a>&lt; T &gt; &amp;&amp;&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">delete</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a52811120b5134c610e2af3fc096c92af"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a52811120b5134c610e2af3fc096c92af">&#9670;&nbsp;</a></span>operator=() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classdrake_1_1multibody_1_1fem_1_1_fem_model.html">FemModel</a>&amp; operator= </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classdrake_1_1multibody_1_1fem_1_1_fem_model.html">FemModel</a>&lt; T &gt; &amp;&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">delete</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a2a8f7cd0b02dc8b1f09fa0b3f17c2df1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2a8f7cd0b02dc8b1f09fa0b3f17c2df1">&#9670;&nbsp;</a></span>set_gravity_vector()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void set_gravity_vector </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="namespacedrake.html#a0ad29daab565ce347c4d1c5aae6a76c2">Vector3</a>&lt; T &gt; &amp;&#160;</td>
          <td class="paramname"><em>gravity</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets the gravity vector for all elements in this model. </p>

</div>
</div>
<a id="a93f9e9287217253c4148bcff802b0fd6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a93f9e9287217253c4148bcff802b0fd6">&#9670;&nbsp;</a></span>ThrowIfModelStateIncompatible()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ThrowIfModelStateIncompatible </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>func</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classdrake_1_1multibody_1_1fem_1_1_fem_state.html">FemState</a>&lt; T &gt; &amp;&#160;</td>
          <td class="paramname"><em>fem_state</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>(Internal use only) Throws std::exception to report a mismatch between the FEM model and state that were passed to API method <code>func</code>. </p>

</div>
</div>
<a id="a7bd928c1298c6e5939d3bd2559e18e71"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7bd928c1298c6e5939d3bd2559e18e71">&#9670;&nbsp;</a></span>UpdateFemStateSystem()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void UpdateFemStateSystem </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Updates the system that manages the states and the cache entries of this FEM model. </p>
<p>Must be called before calling <a class="el" href="classdrake_1_1multibody_1_1fem_1_1_fem_model.html#aef81f0727ef93e6f31d39e6521c30198" title="Creates a default FemState compatible with this model.">MakeFemState()</a> after the FEM model changes (e.g. adding new elements). </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>drake/multibody/fem/<a class="el" href="fem__model_8h.html">fem_model.h</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- footer -->
<div id="nav-path" class="navpath">
  <ul>
    <li class="navelem"><a class="el" href="namespacedrake.html">drake</a></li><li class="navelem"><a class="el" href="namespacedrake_1_1multibody.html">multibody</a></li><li class="navelem"><a class="el" href="namespacedrake_1_1multibody_1_1fem.html">fem</a></li><li class="navelem"><a class="el" href="classdrake_1_1multibody_1_1fem_1_1_fem_model.html">FemModel</a></li>
  </ul>
</div>
<script type="text/javascript">
searchBox.searchLabel = 'Go to name…';
searchBox.DOMSearchField().value = searchBox.searchLabel;
</script>
</body>
</html>
