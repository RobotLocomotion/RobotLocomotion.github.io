<!-- HTML header for doxygen 1.15.0-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.15.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Drake: drake/math/linear_solve.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(function() { init_search(); });
</script>
<script type="text/javascript">
window.MathJax = {
  options: {
    ignoreHtmlClass: 'tex2jax_ignore',
    processHtmlClass: 'tex2jax_process'
  }
};
</script>
<script type="text/javascript" id="MathJax-script" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@4/tex-chtml.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen_extra.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<header class="site-header">
 <div class="site-header-inner contain">
  <a class="drake-logo" href="/"><img src="/images/drake-logo-white.svg"></a>
  <div class="menu-mobile-toggle">
   <span></span>
  </div>
  <nav class="site-menu">
   <ul>
    <li class="site-menu-item site-menu-item-main">
     <a class="site-menu-item" href="/">Home</a>
    </li>
    <li class="site-menu-item site-menu-item-main">
     <a class="site-menu-item" href="/installation.html">Installation</a>
    </li>
    <li class="site-menu-item site-menu-item-main">
     <a class="site-menu-item" href="/gallery.html">Gallery</a>
    </li>
    <li class="site-menu-item site-menu-item-main">API Documentation
     <div class="sub">
      <a class="site-menu-item" href="/doxygen_cxx/index.html">C++</a>
      <a class="site-menu-item" href="/pydrake/index.html">Python</a>
     </div>
    </li>
    <li class="site-menu-item site-menu-item-main">Resources
     <div class="sub">
      <a class="site-menu-item" href="/getting_help.html">Getting Help</a>
      <a class="site-menu-item" href="https://deepnote.com/workspace/Drake-0b3b2c53-a7ad-441b-80f8-bf8350752305/project/Tutorials-2b4fc509-aef2-417d-a40d-6071dfed9199/notebook/index-753e3c9d261247ba9f0eb1d7868c18c8">Tutorials</a>
      <a class="site-menu-item" href="/python_bindings.html">Python Bindings</a>
      <a class="site-menu-item" href="/developers.html">For Developers</a>
      <a class="site-menu-item" href="/credits.html">Credits</a>
     </div>
    </li>
    <li class="github-link">
     <a class="site-menu-item" href="https://github.com/RobotLocomotion/drake">GitHub <img src="/third_party/images/GitHub-Mark-Light-64px.png"></a>
    </li>
   </ul>
  </nav>
 </div>
</header>
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Drake
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<div class="title-banner">
 <div class="title-banner__title">
  Drake C++ Documentation
 </div>
 <div id="DDGSearch">
  <form id="search_form_cpp" class="wy_form" action="https://google.com/search" method="get">
   <input type="text" name="q" placeholder="Search C++ API only…">
   <input type="hidden" name="q" value="site:drake.mit.edu/doxygen_cxx">
  </form>
  <form id="search_form" class="wy_form" action="https://google.com/search" method="get">
   <input type="text" name="q" placeholder="Search all of Drake…">
   <input type="hidden" name="q" value="site:drake.mit.edu OR site:underactuated.csail.mit.edu OR site:manipulation.csail.mit.edu">
  </form>
 </div>
 <div id="MSearchBoxContainer">
  <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect" class="search-icon" onmouseover="return searchBox.OnSearchSelectShow()" onmouseout="return searchBox.OnSearchSelectHide()"><span class="search-icon-dropdown"></span></span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><div id="MSearchCloseImg" class="close-icon"></div></a>
          </span>
        </div>
</td>
 </div>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.15.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('linear__solve_8h.html','',''); });
</script>
<div id="container">
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">linear_solve.h File Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;optional&gt;</code><br />
<code>#include &quot;<a class="el" href="expression_8h.html">drake/common/symbolic/expression.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="math_2autodiff_8h.html">drake/math/autodiff.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="autodiff__gradient_8h.html">drake/math/autodiff_gradient.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for linear_solve.h:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" loading="lazy" frameborder="0" src="linear__solve_8h__incl.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>
</div><div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" loading="lazy" frameborder="0" src="linear__solve_8h__dep__incl.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-nested-classes" class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:LinearSolver_3C_20LinearSolverType_2C_20DerivedA_20_3E" id="r_LinearSolver_3C_20LinearSolverType_2C_20DerivedA_20_3E"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdrake_1_1math_1_1_linear_solver.html">LinearSolver&lt; LinearSolverType, DerivedA &gt;</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Solves a linear system of equations A*x=b.  <a href="classdrake_1_1math_1_1_linear_solver.html#details">More...</a><br /></td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-namespaces" class="groupheader"><a id="namespaces" name="namespaces"></a>
Namespaces</h2></td></tr>
<tr class="memitem:drake" id="r_drake"><td class="memItemLeft" align="right" valign="top">namespace &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacedrake.html">drake</a></td></tr>
<tr class="memitem:drake_3A_3Amath" id="r_drake_3A_3Amath"><td class="memItemLeft" align="right" valign="top">namespace &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacedrake_1_1math.html">drake::math</a></td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-func-members" class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr id="func-members-0" class="groupHeader"><td colspan="2"><div class="groupHeader">solve linear system of equations with a given solver.</div></td></tr>
<tr><td colspan="2" class="ititle"><div class="groupText"><p><a class="anchor" id="linear_solve_given_solver"></a> Solve linear system of equations A * x = b.</p>
<p>Where A is an Eigen matrix of double/AutoDiffScalar/symbolic::Expression, and b is an Eigen matrix of double/AutoDiffScalar/symbolic::Expression. Notice that if either A or b contains <a class="el" href="classdrake_1_1symbolic_1_1_expression.html" title="Represents a symbolic form of an expression.">symbolic::Expression</a>, then the other has to contain <a class="el" href="classdrake_1_1symbolic_1_1_expression.html" title="Represents a symbolic form of an expression.">symbolic::Expression</a>. This 3-argument version allows the user to re-use <code class="param">linear_solver</code> when <code class="param">b</code> changes or the gradient of <code class="param">A</code> changes. When either A or b contains AutoDiffScalar, we use implicit function theorem to find the gradient in x as ∂x/∂zᵢ = A⁻¹(∂b/∂zᵢ - ∂A/∂zᵢ * x) where z is the variable we take gradient with.</p>
<dl class="section note"><dt>Note</dt><dd>When both A and b are Eigen matrix of double, this function is almost as fast as calling linear_solver.solve(b) directly. When either A or b contains AutoDiffScalar, this function is a lot faster than first instantiating the linear solver of AutoDiffScalar, and then solving the equation with this autodiffable linear solver. </dd></dl>
<dl class="tparams"><dt>Template Parameters</dt><dd>
  <table class="tparams">
    <tr><td class="paramname"><a class="el" href="classdrake_1_1math_1_1_linear_solver.html" title="Solves a linear system of equations A*x=b.">LinearSolver</a></td><td>The type of linear solver, for example Eigen::LLT&lt;Eigen::Matrix2d&gt; </td></tr>
    <tr><td class="paramname">DerivedA</td><td>An Eigen Matrix. </td></tr>
    <tr><td class="paramname">DerivedB</td><td>An Eigen <a class="el" href="namespacedrake.html#a01ae662d5635b7c9efe03d15d976f7a8" title="A column vector templated on the number of rows.">Vector</a>. </td></tr>
  </table>
  </dd>
</dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">linear_solver</td><td>The linear solver constructed with the double-version of A. </td></tr>
    <tr><td class="paramname">A</td><td>The matrix A. </td></tr>
    <tr><td class="paramname">b</td><td>The vector b.</td></tr>
  </table>
  </dd>
</dl>
<p>Here is an example code. </p><div class="fragment"><div class="line">Eigen::Matrix&lt;AutoDiffd&lt;3&gt;, 2, 2&gt; A_ad;</div>
<div class="line"><span class="comment">// Set the value and gradient in A_ad with arbitrary values;</span></div>
<div class="line">Eigen::Matrix2d A_val;</div>
<div class="line">A_val &lt;&lt; 1, 2, 3, 4;</div>
<div class="line"><span class="comment">// Gradient of A.col(0).</span></div>
<div class="line">Eigen::Matrix&lt;double, 2, 3&gt; A0_gradient;</div>
<div class="line">A0_gradient &lt;&lt; 1, 2, 3, 4, 5, 6;</div>
<div class="line">A_ad.col(0) = <a class="code hl_function" href="namespacedrake_1_1math.html#a41b52d9aa2a46f7d783f20b12085d9ab">InitializeAutoDiff</a>(A_val.col(0), A0_gradient);</div>
<div class="line"><span class="comment">// Gradient of A.col(1)</span></div>
<div class="line">Eigen::Matrix&lt;double, 2, 3&gt; A1_gradient;</div>
<div class="line">A1_gradient &lt;&lt; 7, 8, 9, 10, 11, 12;</div>
<div class="line">A_ad.col(1) = <a class="code hl_function" href="namespacedrake_1_1math.html#a41b52d9aa2a46f7d783f20b12085d9ab">InitializeAutoDiff</a>(A_val.col(1), A1_gradient);</div>
<div class="line"><span class="comment">// Set the value and gradient of b to arbitrary value.</span></div>
<div class="line"><span class="keyword">const</span> Eigen::Vector2d b_val(2, 3);</div>
<div class="line">Eigen::Matrix&lt;double, 2, 3&gt; b_gradient;</div>
<div class="line">b_gradient &lt;&lt; 1, 3, 5, 7, 9, 11;</div>
<div class="line"><span class="keyword">const</span> <span class="keyword">auto</span> b_ad = <a class="code hl_function" href="namespacedrake_1_1math.html#a41b52d9aa2a46f7d783f20b12085d9ab">InitializeAutoDiff</a>(b_val, b_gradient);</div>
<div class="line"><span class="comment">// Solve the linear system A_val * x_val = b_val.</span></div>
<div class="line">Eigen::PartialPivLU&lt;Eigen::Matrix2d&gt; linear_solver(A_val);</div>
<div class="line"><span class="keyword">const</span> <span class="keyword">auto</span> x_val = <a class="code hl_function" href="namespacedrake_1_1math.html#a1f488e5d6f5e6d74ff2e0909c4223044">SolveLinearSystem</a>(linear_solver, A_val, b_val);</div>
<div class="line"><span class="comment">// Solve the linear system A*x=b, together with the gradient.</span></div>
<div class="line"><span class="comment">// x_ad contains both the value of the solution A*x=b, together with its</span></div>
<div class="line"><span class="comment">// gradient.</span></div>
<div class="line"><span class="keyword">const</span> <span class="keyword">auto</span> x_ad = <a class="code hl_function" href="namespacedrake_1_1math.html#a1f488e5d6f5e6d74ff2e0909c4223044">SolveLinearSystem</a>(linear_solver, A_ad, b_ad);</div>
<div class="ttc" id="anamespacedrake_1_1math_html_a1f488e5d6f5e6d74ff2e0909c4223044"><div class="ttname"><a href="namespacedrake_1_1math.html#a1f488e5d6f5e6d74ff2e0909c4223044">drake::math::SolveLinearSystem</a></div><div class="ttdeci">std::enable_if&lt; internal::is_double_or_symbolic_v&lt; typenameDerivedA::Scalar &gt; &amp;&amp;internal::is_double_or_symbolic_v&lt; typenameDerivedB::Scalar &gt; &amp;&amp;std::is_same_v&lt; typenameDerivedA::Scalar, typenameDerivedB::Scalar &gt;, Eigen::Matrix&lt; typenameDerivedA::Scalar, DerivedA::RowsAtCompileTime, DerivedB::ColsAtCompileTime &gt; &gt;::type SolveLinearSystem(const LinearSolver &amp;linear_solver, const Eigen::MatrixBase&lt; DerivedA &gt; &amp;A, const Eigen::MatrixBase&lt; DerivedB &gt; &amp;b)</div><div class="ttdoc">Specialized when A and b are both double or symbolic::Expression matrices.</div><div class="ttdef"><b>Definition</b> linear_solve.h:127</div></div>
<div class="ttc" id="anamespacedrake_1_1math_html_a41b52d9aa2a46f7d783f20b12085d9ab"><div class="ttname"><a href="namespacedrake_1_1math.html#a41b52d9aa2a46f7d783f20b12085d9ab">drake::math::InitializeAutoDiff</a></div><div class="ttdeci">void InitializeAutoDiff(const Eigen::MatrixBase&lt; Derived &gt; &amp;value, std::optional&lt; int &gt; num_derivatives, std::optional&lt; int &gt; deriv_num_start, Eigen::MatrixBase&lt; DerivedAutoDiff &gt; *auto_diff_matrix)</div><div class="ttdoc">Initializes a single AutoDiff matrix given the corresponding value matrix.</div><div class="ttdef"><b>Definition</b> autodiff.h:131</div></div>
</div><!-- fragment --> </div></td></tr>
<tr class="memitem:a1f488e5d6f5e6d74ff2e0909c4223044" id="r_a1f488e5d6f5e6d74ff2e0909c4223044"><td class="memTemplParams" colspan="2">template&lt;typename <a class="el" href="classdrake_1_1math_1_1_linear_solver.html">LinearSolver</a>, typename DerivedA, typename DerivedB&gt; </td></tr>
<tr class="memitem:a1f488e5d6f5e6d74ff2e0909c4223044 template"><td class="memItemLeft" align="right" valign="top">std::enable_if&lt; internal::is_double_or_symbolic_v&lt; typenameDerivedA::Scalar &gt; &amp;&amp;internal::is_double_or_symbolic_v&lt; typenameDerivedB::Scalar &gt; &amp;&amp;std::is_same_v&lt; typenameDerivedA::Scalar, typenameDerivedB::Scalar &gt;, Eigen::Matrix&lt; typenameDerivedA::Scalar, DerivedA::RowsAtCompileTime, DerivedB::ColsAtCompileTime &gt; &gt;::type&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacedrake_1_1math.html#a1f488e5d6f5e6d74ff2e0909c4223044">SolveLinearSystem</a> (const <a class="el" href="classdrake_1_1math_1_1_linear_solver.html">LinearSolver</a> &amp;linear_solver, const Eigen::MatrixBase&lt; DerivedA &gt; &amp;A, const Eigen::MatrixBase&lt; DerivedB &gt; &amp;b)</td></tr>
<tr class="memdesc:a1f488e5d6f5e6d74ff2e0909c4223044"><td class="mdescLeft">&#160;</td><td class="mdescRight">Specialized when A and b are both double or <a class="el" href="classdrake_1_1symbolic_1_1_expression.html" title="Represents a symbolic form of an expression.">symbolic::Expression</a> matrices.  <br /></td></tr>
<tr class="memitem:afd0c5c28f11ef2554ec39cd29240c095" id="r_afd0c5c28f11ef2554ec39cd29240c095"><td class="memTemplParams" colspan="2">template&lt;typename <a class="el" href="classdrake_1_1math_1_1_linear_solver.html">LinearSolver</a>, typename DerivedB&gt; </td></tr>
<tr class="memitem:afd0c5c28f11ef2554ec39cd29240c095 template"><td class="memItemLeft" align="right" valign="top">std::enable_if&lt; internal::is_double_or_symbolic_v&lt; typenameLinearSolver::MatrixType::Scalar &gt; &amp;&amp;internal::is_double_or_symbolic_v&lt; typenameDerivedB::Scalar &gt; &amp;&amp;std::is_same_v&lt; typenameLinearSolver::MatrixType::Scalar, typenameDerivedB::Scalar &gt;, Eigen::Matrix&lt; typenameLinearSolver::MatrixType::Scalar, DerivedB::RowsAtCompileTime, DerivedB::ColsAtCompileTime &gt; &gt;::type&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacedrake_1_1math.html#afd0c5c28f11ef2554ec39cd29240c095">SolveLinearSystem</a> (const <a class="el" href="classdrake_1_1math_1_1_linear_solver.html">LinearSolver</a> &amp;linear_solver, const Eigen::MatrixBase&lt; DerivedB &gt; &amp;b)</td></tr>
<tr class="memdesc:afd0c5c28f11ef2554ec39cd29240c095"><td class="mdescLeft">&#160;</td><td class="mdescRight">Specialized when the matrix in linear_solver and b are both double or <a class="el" href="classdrake_1_1symbolic_1_1_expression.html" title="Represents a symbolic form of an expression.">symbolic::Expression</a> matrices.  <br /></td></tr>
<tr class="memitem:aa4477ffa8132ff57594302f13bab5380" id="r_aa4477ffa8132ff57594302f13bab5380"><td class="memTemplParams" colspan="2">template&lt;typename <a class="el" href="classdrake_1_1math_1_1_linear_solver.html">LinearSolver</a>, typename DerivedB&gt; </td></tr>
<tr class="memitem:aa4477ffa8132ff57594302f13bab5380 template"><td class="memItemLeft" align="right" valign="top">std::enable_if&lt; std::is_same_v&lt; typenameLinearSolver::MatrixType::Scalar, double &gt; &amp;&amp;internal::is_autodiff_v&lt; typenameDerivedB::Scalar &gt;, Eigen::Matrix&lt; typenameDerivedB::Scalar, DerivedB::RowsAtCompileTime, DerivedB::ColsAtCompileTime &gt; &gt;::type&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacedrake_1_1math.html#aa4477ffa8132ff57594302f13bab5380">SolveLinearSystem</a> (const <a class="el" href="classdrake_1_1math_1_1_linear_solver.html">LinearSolver</a> &amp;linear_solver, const Eigen::MatrixBase&lt; DerivedB &gt; &amp;b)</td></tr>
<tr class="memdesc:aa4477ffa8132ff57594302f13bab5380"><td class="mdescLeft">&#160;</td><td class="mdescRight">Specialized the matrix in linear_solver is a double-valued matrix and b is an AutoDiffScalar-valued matrix.  <br /></td></tr>
<tr class="memitem:af1ad6cb210876e474e321b1ec677a5d0" id="r_af1ad6cb210876e474e321b1ec677a5d0"><td class="memTemplParams" colspan="2">template&lt;typename <a class="el" href="classdrake_1_1math_1_1_linear_solver.html">LinearSolver</a>, typename DerivedA, typename DerivedB&gt; </td></tr>
<tr class="memitem:af1ad6cb210876e474e321b1ec677a5d0 template"><td class="memItemLeft" align="right" valign="top">std::enable_if&lt; std::is_same_v&lt; typenameDerivedA::Scalar, double &gt; &amp;&amp;internal::is_autodiff_v&lt; typenameDerivedB::Scalar &gt;, Eigen::Matrix&lt; typenameDerivedB::Scalar, DerivedA::RowsAtCompileTime, DerivedB::ColsAtCompileTime &gt; &gt;::type&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacedrake_1_1math.html#af1ad6cb210876e474e321b1ec677a5d0">SolveLinearSystem</a> (const <a class="el" href="classdrake_1_1math_1_1_linear_solver.html">LinearSolver</a> &amp;linear_solver, const Eigen::MatrixBase&lt; DerivedA &gt; &amp;A, const Eigen::MatrixBase&lt; DerivedB &gt; &amp;b)</td></tr>
<tr class="memdesc:af1ad6cb210876e474e321b1ec677a5d0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Specialized when A is a double-valued matrix and b is an AutoDiffScalar-valued matrix.  <br /></td></tr>
<tr class="memitem:abbb4dcfd26d9913b0225231b8095f8b1" id="r_abbb4dcfd26d9913b0225231b8095f8b1"><td class="memTemplParams" colspan="2">template&lt;typename <a class="el" href="classdrake_1_1math_1_1_linear_solver.html">LinearSolver</a>, typename DerivedA, typename DerivedB&gt; </td></tr>
<tr class="memitem:abbb4dcfd26d9913b0225231b8095f8b1 template"><td class="memItemLeft" align="right" valign="top">std::enable_if&lt; internal::is_autodiff_v&lt; typenameDerivedA::Scalar &gt;, Eigen::Matrix&lt; typenameDerivedA::Scalar, DerivedA::RowsAtCompileTime, DerivedB::ColsAtCompileTime &gt; &gt;::type&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacedrake_1_1math.html#abbb4dcfd26d9913b0225231b8095f8b1">SolveLinearSystem</a> (const <a class="el" href="classdrake_1_1math_1_1_linear_solver.html">LinearSolver</a> &amp;linear_solver, const Eigen::MatrixBase&lt; DerivedA &gt; &amp;A, const Eigen::MatrixBase&lt; DerivedB &gt; &amp;b)</td></tr>
<tr class="memdesc:abbb4dcfd26d9913b0225231b8095f8b1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Specialized when A is an AutoDiffScalar-valued matrix, and b can contain either AutoDiffScalar or double.  <br /></td></tr>
<tr id="func-members-1" class="groupHeader"><td colspan="2"><div class="groupHeader">Get linear solver</div></td></tr>
<tr><td colspan="2" class="ititle"><div class="groupText"><p><a class="anchor" id="get_linear_solver"></a> Create the linear solver for a given matrix A, which will be used to solve the linear system of equations A * x = b.</p>
<p>The following table indicate the scalar type of the matrix in the returned linear solver, depending on the scalar type in matrix A</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">A  </th><th class="markdownTableHeadNone">double  </th><th class="markdownTableHeadNone">ADS  </th><th class="markdownTableHeadNone">Expr  </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">solver  </td><td class="markdownTableBodyNone">double  </td><td class="markdownTableBodyNone">double  </td><td class="markdownTableBodyNone">Expr  </td></tr>
</table>
<p>where ADS stands for Eigen::AutoDiffScalar, and Expr stands for <a class="el" href="classdrake_1_1symbolic_1_1_expression.html" title="Represents a symbolic form of an expression.">symbolic::Expression</a>. Here is the example code </p><div class="fragment"><div class="line">Eigen::Matrix2d A_val;</div>
<div class="line">A_val &lt;&lt; 1, 2, 2, 5;</div>
<div class="line">Eigen::Vector2d b_val(3, 4);</div>
<div class="line"><span class="keyword">const</span> Eigen::Vector2d x_val =</div>
<div class="line">  <a class="code hl_function" href="namespacedrake_1_1math.html#a1f488e5d6f5e6d74ff2e0909c4223044">SolveLinearSystem</a>(<a class="code hl_function" href="namespacedrake_1_1math.html#a081ebae497dce90eb2e360cb4cd2d689">GetLinearSolver&lt;Eigen::LLT&gt;</a>(A_val), A_val, b_val);</div>
<div class="line">Eigen::Matrix&lt;AutoDiffXd, 2, 2&gt; A_ad;</div>
<div class="line">A_ad(0, 0).value() = A_val(0, 0);</div>
<div class="line">A_ad(0, 0).derivatives() = Eigen::Vector3d(1, 2, 3);</div>
<div class="line">A_ad(0, 1).value() = A_val(0, 1);</div>
<div class="line">A_ad(0, 1).derivatives() = Eigen::Vector3d(2, 3, 4);</div>
<div class="line">A_ad(1, 0).value() = A_val(1, 0);</div>
<div class="line">A_ad(1, 0).derivatives() = Eigen::Vector3d(3, 4, 5);</div>
<div class="line">A_ad(1, 1).value() = A_val(1, 1);</div>
<div class="line">A_ad(1, 1).derivatives() = Eigen::Vector3d(4, 5, 6);</div>
<div class="line"><span class="comment">// Solve A * x = b with A containing gradient.</span></div>
<div class="line"><span class="keyword">const</span> Eigen::Matrix&lt;AutoDiffXd, 2, 1&gt; x_ad1 =</div>
<div class="line">  <a class="code hl_function" href="namespacedrake_1_1math.html#a1f488e5d6f5e6d74ff2e0909c4223044">SolveLinearSystem</a>(<a class="code hl_function" href="namespacedrake_1_1math.html#a081ebae497dce90eb2e360cb4cd2d689">GetLinearSolver&lt;Eigen::LLT&gt;</a>(A_ad), A_ad, b_val);</div>
<div class="line">Eigen::Matrix&lt;AutoDiffXd, 2, 1&gt; b_ad;</div>
<div class="line">b_ad(0).value() = b_val(0);</div>
<div class="line">b_ad(0).derivatives() = Eigen::Vector3d(5, 6, 7);</div>
<div class="line">b_ad(1).value() = b_val(1);</div>
<div class="line">b_ad(1).derivatives() = Eigen::Vector3d(6, 7, 8);</div>
<div class="line"><span class="comment">// Solve A * x = b with b containing gradient.</span></div>
<div class="line"><span class="keyword">const</span> Eigen::Matrix&lt;AutoDiffXd, 2, 1&gt; x_ad2 =</div>
<div class="line">  <a class="code hl_function" href="namespacedrake_1_1math.html#a1f488e5d6f5e6d74ff2e0909c4223044">SolveLinearSystem</a>(<a class="code hl_function" href="namespacedrake_1_1math.html#a081ebae497dce90eb2e360cb4cd2d689">GetLinearSolver&lt;Eigen::LLT&gt;</a>(A_val), A_val, b_ad);</div>
<div class="line"><span class="comment">// Solve A * x = b with both A and b containing gradient.</span></div>
<div class="line"><span class="keyword">const</span> Eigen::Matrix&lt;AutoDiffXd, 2, 1&gt; x_ad3 =</div>
<div class="line">  <a class="code hl_function" href="namespacedrake_1_1math.html#a1f488e5d6f5e6d74ff2e0909c4223044">SolveLinearSystem</a>(<a class="code hl_function" href="namespacedrake_1_1math.html#a081ebae497dce90eb2e360cb4cd2d689">GetLinearSolver&lt;Eigen::LLT&gt;</a>(A_ad), A_ad, b_ad);</div>
<div class="ttc" id="anamespacedrake_1_1math_html_a081ebae497dce90eb2e360cb4cd2d689"><div class="ttname"><a href="namespacedrake_1_1math.html#a081ebae497dce90eb2e360cb4cd2d689">drake::math::GetLinearSolver</a></div><div class="ttdeci">internal::EigenLinearSolver&lt; LinearSolverType, DerivedA &gt; GetLinearSolver(const Eigen::MatrixBase&lt; DerivedA &gt; &amp;A)</div><div class="ttdoc">Get the linear solver for a matrix A.</div><div class="ttdef"><b>Definition</b> linear_solve.h:427</div></div>
</div><!-- fragment --><p>{cc} </p>
</div></td></tr>
<tr class="memitem:a081ebae497dce90eb2e360cb4cd2d689" id="r_a081ebae497dce90eb2e360cb4cd2d689"><td class="memTemplParams" colspan="2">template&lt;template&lt; typename, int... &gt; typename LinearSolverType, typename DerivedA&gt; </td></tr>
<tr class="memitem:a081ebae497dce90eb2e360cb4cd2d689 template"><td class="memItemLeft" align="right" valign="top">internal::EigenLinearSolver&lt; LinearSolverType, DerivedA &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacedrake_1_1math.html#a081ebae497dce90eb2e360cb4cd2d689">GetLinearSolver</a> (const Eigen::MatrixBase&lt; DerivedA &gt; &amp;A)</td></tr>
<tr class="memdesc:a081ebae497dce90eb2e360cb4cd2d689"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the linear solver for a matrix A.  <br /></td></tr>
<tr id="func-members-2" class="groupHeader"><td colspan="2"><div class="groupHeader">solve linear system of equations</div></td></tr>
<tr><td colspan="2" class="ititle"><div class="groupText"><p><a class="anchor" id="linear_solve"></a> Solve linear system of equations A * x = b.</p>
<p>Where A is an Eigen matrix of double/AutoDiffScalar/symbolic::Expression, and b is an Eigen matrix of double/AutoDiffScalar/symbolic::Expression. Note that when either A or b contains <a class="el" href="classdrake_1_1symbolic_1_1_expression.html" title="Represents a symbolic form of an expression.">symbolic::Expression</a>, the other has to contain <a class="el" href="classdrake_1_1symbolic_1_1_expression.html" title="Represents a symbolic form of an expression.">symbolic::Expression</a> as well. When either A or b contains AutoDiffScalar, we use implicit function theorem to find the gradient in x as ∂x/∂zᵢ = A⁻¹(∂b/∂zᵢ - ∂A/∂zᵢ * x) where z is the variable we take gradient with.</p>
<p>The following table indicate the scalar type of x with A/b containing the specified scalar type. The entries with NA are not supported.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">b ＼ A  </th><th class="markdownTableHeadNone">double  </th><th class="markdownTableHeadNone">ADS  </th><th class="markdownTableHeadNone">Expr  </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">double  </td><td class="markdownTableBodyNone">double  </td><td class="markdownTableBodyNone">ADS  </td><td class="markdownTableBodyNone">NA  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">ADS  </td><td class="markdownTableBodyNone">ADS  </td><td class="markdownTableBodyNone">ADS  </td><td class="markdownTableBodyNone">NA  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Expr  </td><td class="markdownTableBodyNone">NA  </td><td class="markdownTableBodyNone">NA  </td><td class="markdownTableBodyNone">Expr  </td></tr>
</table>
<p>where ADS stands for Eigen::AutoDiffScalar, and Expr stands for <a class="el" href="classdrake_1_1symbolic_1_1_expression.html" title="Represents a symbolic form of an expression.">symbolic::Expression</a>.</p>
<p>TODO(hongkai.dai): support one of A/b being a double matrix and the other being a <a class="el" href="classdrake_1_1symbolic_1_1_expression.html" title="Represents a symbolic form of an expression.">symbolic::Expression</a> matrix.</p>
<dl class="section note"><dt>Note</dt><dd>When both A and b are Eigen matrix of double, this function is almost as fast as calling linear_solver.solve(b) directly; when either A or b contains AutoDiffScalar, this function is a lot faster than first instantiating the linear solver of AutoDiffScalar, and then solving the equation with this autodiffable linear solver. </dd></dl>
<dl class="tparams"><dt>Template Parameters</dt><dd>
  <table class="tparams">
    <tr><td class="paramname">LinearSolverType</td><td>The type of linear solver, for example Eigen::LLT. Notice that this is just specifies the solver type (such as Eigen::LLT), not the matrix type (like Eigen::LLT&lt;Eigen::Matrix2d&gt;). All Eigen solvers we care about are templated on the matrix type. Some are further templated on configuration ints. The int... will account for zero or more of these ints, providing a common interface for both types of solvers. </td></tr>
    <tr><td class="paramname">DerivedA</td><td>An Eigen Matrix. </td></tr>
    <tr><td class="paramname">DerivedB</td><td>An Eigen <a class="el" href="namespacedrake.html#a01ae662d5635b7c9efe03d15d976f7a8" title="A column vector templated on the number of rows.">Vector</a>. </td></tr>
  </table>
  </dd>
</dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">A</td><td>The matrix A. </td></tr>
    <tr><td class="paramname">b</td><td>The vector b.</td></tr>
  </table>
  </dd>
</dl>
<p>Here is an example code. </p><div class="fragment"><div class="line">Eigen::Matrix&lt;AutoDiffd&lt;3&gt;, 2, 2&gt; A_ad;</div>
<div class="line"><span class="comment">// Set the value and gradient in A_ad with arbitrary values;</span></div>
<div class="line">Eigen::Matrix2d A_val;</div>
<div class="line">A_val &lt;&lt; 1, 2, 3, 4;</div>
<div class="line"><span class="comment">// Gradient of A.col(0).</span></div>
<div class="line">Eigen::Matrix&lt;double, 2, 3&gt; A0_gradient;</div>
<div class="line">A0_gradient &lt;&lt; 1, 2, 3, 4, 5, 6;</div>
<div class="line">A_ad.col(0) = <a class="code hl_function" href="namespacedrake_1_1math.html#a41b52d9aa2a46f7d783f20b12085d9ab">InitializeAutoDiff</a>(A_val.col(0), A0_gradient);</div>
<div class="line"><span class="comment">// Gradient of A.col(1)</span></div>
<div class="line">Eigen::Matrix&lt;double, 2, 3&gt; A1_gradient;</div>
<div class="line">A1_gradient &lt;&lt; 7, 8, 9, 10, 11, 12;</div>
<div class="line">A_ad.col(1) = <a class="code hl_function" href="namespacedrake_1_1math.html#a41b52d9aa2a46f7d783f20b12085d9ab">InitializeAutoDiff</a>(A_val.col(1), A1_gradient);</div>
<div class="line"><span class="comment">// Set the value and gradient of b to arbitrary value.</span></div>
<div class="line"><span class="keyword">const</span> Eigen::Vector2d b_val(2, 3);</div>
<div class="line">Eigen::Matrix&lt;double, 2, 3&gt; b_gradient;</div>
<div class="line">b_gradient &lt;&lt; 1, 3, 5, 7, 9, 11;</div>
<div class="line"><span class="keyword">const</span> <span class="keyword">auto</span> b_ad = <a class="code hl_function" href="namespacedrake_1_1math.html#a41b52d9aa2a46f7d783f20b12085d9ab">InitializeAutoDiff</a>(b_val, b_gradient);</div>
<div class="line"><span class="comment">// Solve the linear system A*x=b without the gradient.</span></div>
<div class="line"><span class="keyword">const</span> <span class="keyword">auto</span> x_val = <a class="code hl_function" href="namespacedrake_1_1math.html#a1f488e5d6f5e6d74ff2e0909c4223044">SolveLinearSystem&lt;Eigen::PartialPivLU&gt;</a>(A_val, b_val);</div>
<div class="line"><span class="comment">// Solve the linear system A*x=b, together with the gradient.</span></div>
<div class="line"><span class="comment">// x_ad contains both the value of the solution A*x=b, together with its</span></div>
<div class="line"><span class="comment">// gradient.</span></div>
<div class="line"><span class="keyword">const</span> <span class="keyword">auto</span> x_ad = <a class="code hl_function" href="namespacedrake_1_1math.html#a1f488e5d6f5e6d74ff2e0909c4223044">SolveLinearSystem&lt;Eigen::PartialPivLU&gt;</a>(A_ad, b_ad);</div>
</div><!-- fragment --> </div></td></tr>
<tr class="memitem:a457f738539d660aec84e6fb0b6a93e93" id="r_a457f738539d660aec84e6fb0b6a93e93"><td class="memTemplParams" colspan="2">template&lt;template&lt; typename, int... &gt; typename LinearSolverType, typename DerivedA, typename DerivedB&gt; </td></tr>
<tr class="memitem:a457f738539d660aec84e6fb0b6a93e93 template"><td class="memItemLeft" align="right" valign="top">internal::Solution&lt; DerivedA, DerivedB &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacedrake_1_1math.html#a457f738539d660aec84e6fb0b6a93e93">SolveLinearSystem</a> (const Eigen::MatrixBase&lt; DerivedA &gt; &amp;A, const Eigen::MatrixBase&lt; DerivedB &gt; &amp;b)</td></tr>
<tr class="memdesc:a457f738539d660aec84e6fb0b6a93e93"><td class="mdescLeft">&#160;</td><td class="mdescRight">Solves system A*x=b.  <br /></td></tr>
</table>
</div><!-- contents -->
</div><!-- doc-content -->
<div id="page-nav" class="page-nav-panel">
<div id="page-nav-resize-handle"></div>
<div id="page-nav-tree">
<div id="page-nav-contents">
</div><!-- page-nav-contents -->
</div><!-- page-nav-tree -->
</div><!-- page-nav -->
</div><!-- container -->
<!-- footer -->
<div class="navpath">
  <ul>
    <li class="navelem"><a href="dir_f1666844dc41ec91c14125b680b7be1b.html">drake</a></li><li class="navelem"><a href="dir_fc0178d6978c9fa2cad6ef3e048a60a7.html">math</a></li><li class="navelem"><a href="linear__solve_8h.html">linear_solve.h</a></li>
  </ul>
</div>
<footer id="nav-path", class="site-footer padding">
  <div class="contain">
    <a href="/" class="drake-logo">
      <img src="/images/drake-logo.svg"/>
    </a>
    <div class="footer-menu">
      <ul>
        <li>
          <a href="https://accessibility.mit.edu/" class="site-menu-item">Accessibility</a>
        </li>
        <li>
          <a href="/doxygen_cxx/index.html" class="site-menu-item">C++</a>
        </li>
        <li>
          <a href="/pydrake/index.html" class="site-menu-item">Python</a>
        </li>
        <li class="github-link">
          <a href="https://github.com/RobotLocomotion/drake" class="site-menu-item">GitHub <img src="/third_party/images/GitHub-Mark-64px.png"/></a>
        </li>
      </ul>
    </div>
  </div>
</footer>
<script type="text/javascript">
searchBox.searchLabel = 'Go to name…';
searchBox.DOMSearchField().placeholder = searchBox.searchLabel;
searchBox.DOMSearchField().value = '';
</script>
</body>
</html>
