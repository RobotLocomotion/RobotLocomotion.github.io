<!-- HTML header for doxygen 1.14.0-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.14.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Drake: Stochastic Systems</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(function() { init_search(); });
</script>
<script type="text/javascript">
window.MathJax = {
  options: {
    ignoreHtmlClass: 'tex2jax_ignore',
    processHtmlClass: 'tex2jax_process'
  }
};
</script>
<script type="text/javascript" id="MathJax-script" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen_extra.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<header class="site-header">
 <div class="site-header-inner contain">
  <a class="drake-logo" href="/"><img src="/images/drake-logo-white.svg"></a>
  <div class="menu-mobile-toggle">
   <span></span>
  </div>
  <nav class="site-menu">
   <ul>
    <li class="site-menu-item site-menu-item-main">
     <a class="site-menu-item" href="/">Home</a>
    </li>
    <li class="site-menu-item site-menu-item-main">
     <a class="site-menu-item" href="/installation.html">Installation</a>
    </li>
    <li class="site-menu-item site-menu-item-main">
     <a class="site-menu-item" href="/gallery.html">Gallery</a>
    </li>
    <li class="site-menu-item site-menu-item-main">API Documentation
     <div class="sub">
      <a class="site-menu-item" href="/doxygen_cxx/index.html">C++</a>
      <a class="site-menu-item" href="/pydrake/index.html">Python</a>
     </div>
    </li>
    <li class="site-menu-item site-menu-item-main">Resources
     <div class="sub">
      <a class="site-menu-item" href="/getting_help.html">Getting Help</a>
      <a class="site-menu-item" href="https://deepnote.com/workspace/Drake-0b3b2c53-a7ad-441b-80f8-bf8350752305/project/Tutorials-2b4fc509-aef2-417d-a40d-6071dfed9199/notebook/index-753e3c9d261247ba9f0eb1d7868c18c8">Tutorials</a>
      <a class="site-menu-item" href="/python_bindings.html">Python Bindings</a>
      <a class="site-menu-item" href="/developers.html">For Developers</a>
      <a class="site-menu-item" href="/credits.html">Credits</a>
     </div>
    </li>
    <li class="github-link">
     <a class="site-menu-item" href="https://github.com/RobotLocomotion/drake">GitHub <img src="/third_party/images/GitHub-Mark-Light-64px.png"></a>
    </li>
   </ul>
  </nav>
 </div>
</header>
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Drake
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<div class="title-banner">
 <div class="title-banner__title">
  Drake C++ Documentation
 </div>
 <div id="DDGSearch">
  <form id="search_form_cpp" class="wy_form" action="https://google.com/search" method="get">
   <input type="text" name="q" placeholder="Search C++ API only…">
   <input type="hidden" name="q" value="site:drake.mit.edu/doxygen_cxx">
  </form>
  <form id="search_form" class="wy_form" action="https://google.com/search" method="get">
   <input type="text" name="q" placeholder="Search all of Drake…">
   <input type="hidden" name="q" value="site:drake.mit.edu OR site:underactuated.csail.mit.edu OR site:manipulation.csail.mit.edu">
  </form>
 </div>
 <div id="MSearchBoxContainer">
  <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect" class="search-icon" onmouseover="return searchBox.OnSearchSelectShow()" onmouseout="return searchBox.OnSearchSelectHide()"><span class="search-icon-dropdown"></span></span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><div id="MSearchCloseImg" class="close-icon"></div></a>
          </span>
        </div>
</td>
 </div>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.14.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('group__stochastic__systems.html','',''); });
</script>
<div id="container">
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">Stochastic Systems <div class="ingroups"><a class="el" href="group__systems.html">Modeling Dynamical Systems</a></div></div></div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 id="header-details" class="groupheader">Detailed Description</h2>
<p>This page describes the implementation details of modeling a stochastic system in Drake and writing algorithms that explicitly leverage the stochastic modeling framework. </p>
<p>A discrete-time system in Drake can be viewed as having the state-space dynamics </p><pre class="fragment">  xₙ₊₁ = f(n, xₙ, uₙ, wₙ; p),
  yₙ = g(n, xₙ, uₙ, wₙ; p),
</pre><p> where n is the step index, x is the state, y is the output, u is the input, and p are the (constant) parameters. This form also calls out w explicitly as a random "disturbance" input. These random inputs are implemented and evaluated using exactly the same methods as the deterministic inputs; any input port can optionally be annotated as "random" when they are being declared (see <a class="el" href="classdrake_1_1systems_1_1_system.html#af0b57e4cacf2beba4ef87c87f824aba8" title="Adds a port with the specified type and size to the input topology.">System&lt;T&gt;::DeclareInputPort()</a> ). Once randomness exists in a system, many signals will throughout the diagram become random variables, but this label is used to denote the "point of entry" for an independent random variable.</p>
<dl class="section note"><dt>Note</dt><dd>For simplicity, I've written only a simple discrete-time system form above, but the same model holds for continuous-time systems, and multi-rate systems, and systems with multiple input/output ports as well, precisely because w is treated exactly as an additional input throughout the system classes. Continuous-time random signals must be treated with some care; see internal::RandomSource for details on how they are treated for the purposes of simulation.</dd></dl>
<p>The rule in Drake is that every method that can be called during the lifetime of a simulation, (e.g. calculating discrete updates, time derivatives, and/or outputs) <em>must</em> be a completely deterministic function. Any randomness must come in through a random input port. The only exception to this rule is the one specially-implemented internal::RandomSource system, which goes to some length to store the state of the random number generator in its <a class="el" href="classdrake_1_1systems_1_1_context.html" title="Context is an abstract class template that represents all the typed values that are used in a System&#39;...">Context</a> so that all simulation and analysis methods are deterministic given a <a class="el" href="classdrake_1_1systems_1_1_context.html" title="Context is an abstract class template that represents all the typed values that are used in a System&#39;...">Context</a>. In almost every application, random input ports will be wired up to internal::RandomSource system blocks; we have provided the <a class="el" href="namespacedrake_1_1systems.html#a6927bc2509cc8b86f2d9152e6d2ca3ce" title="For each subsystem input port in builder that is (a) not yet connected and (b) labeled as random in t...">AddRandomInputs()</a> method to facilitate this.</p>
<p>Algorithms written for Systems can query the property of the <a class="el" href="classdrake_1_1systems_1_1_input_port.html" title="An InputPort is a System resource that describes the kind of input a System accepts,...">InputPort</a> to find the input ports that are labeled as random, and the random vector distribution type. The list of supported distributions for random input ports is intentionally very limited (to simplify algorithm development); we place the burden on the <a class="el" href="classdrake_1_1systems_1_1_system.html" title="Base class for all System functionality that is dependent on the templatized scalar type T for input,...">System</a> author to e.g. transform a Gaussian random input with zero mean and unit covariance into the desired shape inside the update and output methods.</p>
<p>In order to specify distributions over random initial conditions and random parameters, <a class="el" href="classdrake_1_1systems_1_1_system.html" title="Base class for all System functionality that is dependent on the templatized scalar type T for input,...">System</a> classes may override the methods <a class="el" href="classdrake_1_1systems_1_1_system.html#a47a8dc372e0063851c9851ee15da74e9" title="Assigns random values to all elements of the state.">System&lt;T&gt;::SetRandomState()</a> and <a class="el" href="classdrake_1_1systems_1_1_system.html#af7a8969fd7784256a68402b391f8902b" title="Assigns random values to all parameters.">System&lt;T&gt;::SetRandomParameters()</a>. Algorithms written for systems may call <a class="el" href="classdrake_1_1systems_1_1_system.html#a6a5a403983483dda39f8196a241225f2" title="Sets Context fields to random values.">System&lt;T&gt;::SetRandomContext()</a> (which calls both of these). These methods must be deterministic functions of their input arguments &ndash; a (mutable) <a class="el" href="classdrake_1_1_random_generator.html" title="Defines Drake&#39;s canonical implementation of the UniformRandomBitGenerator C++ concept (as well as a f...">drake::RandomGenerator</a> is passed in and must be the only source of "randomness". Their implementations are expected to draw samples from random distributions satisfying the C++ Standard Library <a href="https://en.cppreference.com/w/cpp/named_req/RandomNumberDistribution">RandomNumberDistribution concept</a>. Because these distributions can have internal state, we encourage authors to allocate the distribution locally inside the implementation of the SetRandomState() or SetRandomParameters() methods; do not be tempted to create a mutable member variable of your <a class="el" href="classdrake_1_1systems_1_1_system.html" title="Base class for all System functionality that is dependent on the templatized scalar type T for input,...">System</a>.</p>
<p>Finally, in some cases the actual constitution of a <a class="el" href="classdrake_1_1systems_1_1_system.html" title="Base class for all System functionality that is dependent on the templatized scalar type T for input,...">System</a> is random. A common example of this is when we perform a multibody simulation with a different number of objects generated in the environment for each random simulation. APIs to support this functionality use a systems::analysis::SimulatorFactory method which constructs the random <a class="el" href="classdrake_1_1systems_1_1_system.html" title="Base class for all System functionality that is dependent on the templatized scalar type T for input,...">System</a> and its simulation parameters as a deterministic function of the <a class="el" href="classdrake_1_1_random_generator.html" title="Defines Drake&#39;s canonical implementation of the UniformRandomBitGenerator C++ concept (as well as a f...">drake::RandomGenerator</a>.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__analysis.html#gab1b68e9d211eb49b9d5b240b0da5be23" title="Generates samples of a scalar random variable output by running many random simulations drawn from in...">systems::analysis::MonteCarloSimulation</a> </dd></dl>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-groups" class="groupheader"><a id="groups" name="groups"></a>
Topics</h2></td></tr>
<tr class="memitem:schema_5Fstochastic" id="r_schema_5Fstochastic"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__schema__stochastic.html">Configuring distributions</a></td></tr>
<tr class="memdesc:group__schema__stochastic"><td class="mdescLeft">&#160;</td><td class="mdescRight">This page describes how to use classes such as <a class="el" href="classdrake_1_1schema_1_1_distribution.html" title="Base class for a single distribution, to be used with YAML archives.">schema::Distribution</a> to denote stochastic quantities, as a bridge between loading a scenario specification and populating the corresponding <a class="el" href="classdrake_1_1symbolic_1_1_expression.html" title="Represents a symbolic form of an expression.">symbolic::Expression</a> quantities into a <a class="el" href="classdrake_1_1systems_1_1_system.html" title="Base class for all System functionality that is dependent on the templatized scalar type T for input,...">systems::System</a>. <br /></td></tr>
<tr class="memitem:schema_5Ftransform" id="r_schema_5Ftransform"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__schema__transform.html">Configuring transforms</a></td></tr>
<tr class="memdesc:group__schema__transform"><td class="mdescLeft">&#160;</td><td class="mdescRight">This page describes how to use classes such as <a class="el" href="classdrake_1_1schema_1_1_rotation.html" title="A specification for an SO(3) rotation, to be used for serialization purposes, e.g....">schema::Rotation</a> and <a class="el" href="classdrake_1_1schema_1_1_transform.html" title="A specification for a 3d rotation and translation, optionally with respect to a base frame.">schema::Transform</a> to denote stochastic quantities, as a bridge between loading a scenario specification and populating the corresponding <a class="el" href="classdrake_1_1math_1_1_rigid_transform.html" title="This class represents a proper rigid transform between two frames which can be regarded in two ways.">math::RigidTransform</a> quantities. <br /></td></tr>
</table>
</div><!-- contents -->
</div><!-- doc-content -->
<div id="page-nav" class="page-nav-panel">
<div id="page-nav-resize-handle"></div>
<div id="page-nav-tree">
<div id="page-nav-contents">
</div><!-- page-nav-contents -->
</div><!-- page-nav-tree -->
</div><!-- page-nav -->
</div><!-- container -->
<!-- footer -->
<div class="navpath">
  <ul>
  </ul>
</div>
<footer id="nav-path", class="site-footer padding">
  <div class="contain">
    <a href="/" class="drake-logo">
      <img src="/images/drake-logo.svg"/>
    </a>
    <div class="footer-menu">
      <ul>    
        <li>
          <a href="/doxygen_cxx/index.html" class="site-menu-item">C++</a>
        </li>    
        <li>
          <a href="/pydrake/index.html" class="site-menu-item">Python</a>
        </li>
        <li class="github-link">
          <a href="https://github.com/RobotLocomotion/drake" class="site-menu-item">GitHub <img src="/third_party/images/GitHub-Mark-64px.png"/></a>
        </li>
      </ul>
    </div>
  </div>
</footer>
<script type="text/javascript">
searchBox.searchLabel = 'Go to name…';
searchBox.DOMSearchField().placeholder = searchBox.searchLabel;
searchBox.DOMSearchField().value = '';
</script>
</body>
</html>
